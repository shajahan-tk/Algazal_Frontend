import{j as e,r as m,aa as C,ab as D,ad as w,m as k,v as P,a as T,a4 as A,ae as E}from"./index-B-3YdMmO.js";import{a as S}from"./ProjectService-DKBgiGbK.js";import{C as g}from"./Card-Dg6B2cp2.js";import{B as b}from"./Button-CfVbO-qU.js";import{D as u}from"./index-DVAakj00.js";import{aE as H,aF as L,L as M,T as $}from"./index-C7R1WpOH.js";import{c as B,P as R}from"./index-BdrlLZgj.js";import{A as h,T as z}from"./index-Bo39LFtR.js";import"./context-_TTgW2bZ.js";import"./toString-B2j7ZGf1.js";import"./Views-o_SZwizf.js";import"./useUniqueId-bhrNi0MA.js";import"./index-Dhg3PmVb.js";import"./proxy-nPFZIZ0Z.js";import"./chainedFunction-BxZSneMW.js";import"./floating-ui.react-l_cC_yYr.js";import"./floating-ui.dom-B_iSk-nO.js";const I=s=>{const{shape:a="circle",variant:r="plain",size:t="xs"}=s;return e.jsx(b,{shape:a,variant:r,size:t,icon:e.jsx(B,{}),...s})};function O(s=""){const a=s.match(/\b(\w)/g);return a?a.join(""):s}const x=["indigo-600","emerald-500","cyan-500","blue-600","teal-500","fuchsia-500","pink-500","rose-500","red-500","amber-500","violet-500","purple-500"];function F(s="bg"){const a=t=>{let n=0;for(let o=0;o<t.length;o++){const c=t.charCodeAt(o);n+=c}return n};return m.useCallback(t=>{const o=a(t)%x.length,c=x[o];return`${s}-${c} dark:${s}-${c}`},[s])}const G=s=>{const{avatarGroupProps:a={},avatarProps:r={},imgKey:t="img",nameKey:n="name",onAvatarClick:o,users:c=[],...d}=s,v=F(),p=m.useMemo(()=>({shape:"circle",size:30,className:"cursor-pointer",...r}),[r]),y=l=>{o==null||o(l)};return e.jsx(h.Group,{omittedAvatarTooltip:!0,chained:!0,omittedAvatarProps:p,...a,...d,children:c.map((l,N)=>e.jsx(z,{title:l[n],children:e.jsx(h,{...p,className:`${l[t]?"":v(l[n])} ${p.className}`,src:l[t],onClick:()=>y(l),children:O(l.name)})},l[n]+N))})},f="projectDashboard",j=C(f+"/getProjectDashboardData",async()=>(await S()).data),J={loading:!0,dashboardData:{}},K=D({name:`${f}/state`,initialState:J,reducers:{},extraReducers:s=>{s.addCase(j.fulfilled,(a,r)=>{a.dashboardData=r.payload,a.loading=!1}).addCase(j.pending,a=>{a.loading=!0})}}),V=K.reducer,W=w({data:V}),U=({userName:s,taskCount:a})=>e.jsx("div",{children:e.jsxs("h4",{className:"mb-1",children:["Hello, ",s,"!"]})}),_=[{label:"Add Flag",value:"addFlag",icon:e.jsx(H,{})},{label:"Move",value:"move",icon:e.jsx(L,{})},{label:"Setting",value:"projectSetting",icon:e.jsx(M,{})}],q=()=>e.jsx(u,{placement:"bottom-end",renderTitle:e.jsx(I,{}),children:_.map(s=>e.jsxs(u.Item,{eventKey:s.value,children:[e.jsx("span",{className:"text-lg",children:s.icon}),e.jsx("span",{className:"ml-2 rtl:mr-2",children:s.label})]},s.value))}),Q=({members:s})=>e.jsx(G,{users:s}),X=({progression:s})=>{const a=m.useMemo(()=>s>70?{color:"green-500"}:s<40?{color:"red-500"}:{},[s]);return e.jsx(R,{size:"sm",percent:s,...a})},Y=({data:s,cardBorder:a})=>{const{name:r,totalTask:t,completedTask:n,progression:o,member:c,category:d}=s;return e.jsx("div",{className:"mb-4",children:e.jsx(g,{bordered:a,children:e.jsxs("div",{className:"grid gap-x-4 grid-cols-12",children:[e.jsx("div",{className:"my-1 sm:my-0 col-span-12 sm:col-span-2 md:col-span-3 lg:col-span-3 md:flex md:items-center",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h6",{className:"font-bold",children:e.jsx(k,{to:"/app/project/scrum-board",children:r})}),e.jsx("span",{children:d})]})}),e.jsx("div",{className:"my-1 sm:my-0 col-span-12 sm:col-span-2 md:col-span-2 lg:col-span-2 md:flex md:items-center md:justify-end",children:e.jsxs("div",{className:"inline-flex items-center px-2 py-1 border border-gray-300 rounded-full",children:[e.jsx($,{className:"text-base"}),e.jsxs("span",{className:"ml-1 rtl:mr-1 whitespace-nowrap",children:[n," / ",t]})]})}),e.jsx("div",{className:"my-1 sm:my-0 col-span-12 md:col-span-2 lg:col-span-3 md:flex md:items-center",children:e.jsx(X,{progression:o})}),e.jsx("div",{className:"my-1 sm:my-0 col-span-12 md:col-span-3 lg:col-span-3 md:flex md:items-center",children:e.jsx(Q,{members:c})}),e.jsx("div",{className:"my-1 sm:my-0 col-span-12 sm:col-span-1 flex md:items-center justify-end",children:e.jsx(q,{})})]})})})},Z=({data:s=[]})=>{const a=P(),r=()=>{a("/app/project/project-list")};return e.jsxs(g,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h4",{children:"Projectssssss"}),e.jsx(b,{size:"sm",onClick:r,children:"View All"})]}),s.map(t=>e.jsx(Y,{cardBorder:!0,data:t},t.id))]})};E("projectDashboard",W);let i=JSON.parse(localStorage.getItem("user")||"{}");console.log(i,"user");const ee={dashboardData:{userName:(i==null?void 0:i.name)||"user",projectsData:[{id:"1",name:"Website Redesign",category:"Web Development",desc:"Complete redesign of company website",attachmentCount:12,totalTask:45,completedTask:28,progression:62,dayleft:14,status:"in progress",member:[{id:"1",name:"John Doe",email:"john@example.com",img:"/img/avatars/thumb-1.jpg"},{id:"2",name:"Jane Smith",email:"jane@example.com",img:"/img/avatars/thumb-2.jpg"}]},{id:"2",name:"Mobile App",category:"Mobile Development",desc:"Development of company mobile application",attachmentCount:8,totalTask:32,completedTask:12,progression:38,dayleft:21,status:"in progress",member:[{id:"3",name:"Robert Johnson",email:"robert@example.com",img:"/img/avatars/thumb-3.jpg"},{id:"4",name:"Emily Davis",email:"emily@example.com",img:"/img/avatars/thumb-4.jpg"}]}]}},be=()=>{T();const s=ee.dashboardData,a=!1;return m.useEffect(()=>{},[]),e.jsx("div",{className:"flex flex-col gap-4 h-full",children:e.jsxs(A,{loading:a,children:[e.jsx(U,{userName:s==null?void 0:s.userName,taskCount:s==null?void 0:s.taskCount}),e.jsx("div",{className:"flex flex-col xl:flex-row gap-4",children:e.jsx("div",{className:"flex flex-col gap-4 flex-auto",children:e.jsx(Z,{data:s==null?void 0:s.projectsData})})})]})})};export{be as default};
