import{r as x,j as e,v as J,ak as W}from"./index-B-3YdMmO.js";import{N as M,t as T}from"./toast-xjy4rp4Y.js";import{F as $,a as t}from"./FormItem-B_dHMuui.js";import{B as N}from"./Button-CfVbO-qU.js";import{S as Z}from"./StickyFooter-kVZ9pP5X.js";import{F as X,a as Q}from"./formik.esm-DIqlYRh2.js";import{a as _,A as V}from"./index-of15F68n.js";import{$ as z}from"./index-C7R1WpOH.js";import{c as K,e as ee,g as u,b as B}from"./index.esm-uYrHGYFJ.js";import"./Alert-QJLDMk5I.js";import"./index-Bo39LFtR.js";import"./Badge-B2PjptLi.js";import"./index-DCFjNNBJ.js";import"./Card-Dg6B2cp2.js";import"./Skeleton-C9LsrBBE.js";import"./Dialog-DSC5KQx1.js";import"./Drawer-CIBw5hlm.js";import"./index-DVAakj00.js";import"./useUniqueId-bhrNi0MA.js";import{I as o}from"./Input-m_H_R88b.js";import"./index-B_Yvn3dy.js";import"./index-Z4dDP0Pn.js";import"./index-BdrlLZgj.js";import"./index-5z68-iaN.js";import"./ScrollBar-C_iOIJGq.js";import{S as H}from"./Select-DPSULLBa.js";import"./Upload-CuAXzTtV.js";import"./index-CqQ94ycg.js";import"./Tag-D_vNYl-M.js";import{A as ae}from"./AdaptableCard-17ILPCDG.js";import"./Views-o_SZwizf.js";import"./chart.config-Cux27phG.js";import"./DataTable-CxfAxHEh.js";import"./SvgIcon-BC1C4FwK.js";import"./SegmentItemOption-CxYE_tKh.js";import{n as le,H as ne,I as ie,J as re}from"./api-C4nUkZdB.js";import"./StatusIcon-IxYTyNOx.js";import"./CloseButton-8arYtbYT.js";import"./chainedFunction-BxZSneMW.js";import"./proxy-nPFZIZ0Z.js";import"./context-_TTgW2bZ.js";import"./index-Dhg3PmVb.js";import"./cloneDeep-DJN0yfLA.js";import"./hoist-non-react-statics.cjs-VlwWE1Gk.js";import"./floating-ui.react-l_cC_yYr.js";import"./floating-ui.dom-B_iSk-nO.js";import"./useControllableState-HmMJSzbR.js";import"./_getPrototype-BJeMep-l.js";import"./index-BL9xzUQn.js";import"./toString-B2j7ZGf1.js";import"./index-CYY49BFP.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./index-BLqgq88H.js";import"./index-BYLbIXHY.js";import"./useThemeClass-BEUnEzZK.js";const F=x.forwardRef((g,v)=>{const{type:w,initialData:C={employee:"",designation:"",country:"",basicSalary:0,allowance:0,totalSalary:0,twoYearSalary:0,perYearExpenses:0,perMonthExpenses:0,perDayExpenses:0,totalExpensesPerPerson:0,visaExpenses:0,twoYearUniform:0,shoes:0,twoYearAccommodation:0,sewaBills:0,dewaBills:0,insurance:0,transport:0,water:0,thirdPartyLiabilities:0,fairmontCertificate:0,leaveSalary:0,ticket:0,gratuity:0,customExpenses:[]},onFormSubmit:I,onDiscard:y,onDelete:E}=g,f=K().shape({employee:B().required("Employee is required"),designation:B().required("Designation is required"),country:B().required("Country is required"),basicSalary:u().required("Basic salary is required").min(0,"Basic salary cannot be negative"),allowance:u().required("Allowance is required").min(0,"Allowance cannot be negative"),totalSalary:u().required("Total salary is required").min(0,"Total salary cannot be negative"),twoYearSalary:u().required("Two year salary is required").min(0,"Two year salary cannot be negative"),perYearExpenses:u().required("Per year expenses are required").min(0,"Expenses cannot be negative"),perMonthExpenses:u().required("Per month expenses are required").min(0,"Expenses cannot be negative"),perDayExpenses:u().required("Per day expenses are required").min(0,"Expenses cannot be negative"),totalExpensesPerPerson:u().required("Total expenses per person are required").min(0,"Expenses cannot be negative"),visaExpenses:u().required("Visa expenses are required").min(0,"Expenses cannot be negative"),twoYearUniform:u().required("Two year uniform cost is required").min(0,"Cost cannot be negative"),shoes:u().required("Shoes cost is required").min(0,"Cost cannot be negative"),twoYearAccommodation:u().required("Two year accommodation cost is required").min(0,"Cost cannot be negative"),sewaBills:u().required("SEWA bills are required").min(0,"Bills cannot be negative"),dewaBills:u().required("DEWA bills are required").min(0,"Bills cannot be negative"),insurance:u().required("Insurance cost is required").min(0,"Cost cannot be negative"),transport:u().required("Transport cost is required").min(0,"Cost cannot be negative"),water:u().required("Water cost is required").min(0,"Cost cannot be negative"),thirdPartyLiabilities:u().required("Third party liabilities are required").min(0,"Amount cannot be negative"),fairmontCertificate:u().required("Fairmont certificate cost is required").min(0,"Cost cannot be negative"),leaveSalary:u().required("Leave salary is required").min(0,"Amount cannot be negative"),ticket:u().required("Ticket cost is required").min(0,"Cost cannot be negative"),gratuity:u().required("Gratuity amount is required").min(0,"Amount cannot be negative"),customExpenses:ee().of(K().shape({name:B().required("Custom expense name is required"),amount:u().required("Custom expense amount is required").min(0,"Amount cannot be negative")}))}),A=[{value:"Aruba",label:"Aruba"},{value:"Afghanistan",label:"Afghanistan"},{value:"Angola",label:"Angola"},{value:"Anguilla",label:"Anguilla"},{value:"Åland Islands",label:"Åland Islands"},{value:"Albania",label:"Albania"},{value:"Andorra",label:"Andorra"},{value:"United Arab Emirates",label:"United Arab Emirates"},{value:"Argentina",label:"Argentina"},{value:"Armenia",label:"Armenia"},{value:"American Samoa",label:"American Samoa"},{value:"Antarctica",label:"Antarctica"},{value:"French Southern Territories",label:"French Southern Territories"},{value:"Antigua and Barbuda",label:"Antigua and Barbuda"},{value:"Australia",label:"Australia"},{value:"Austria",label:"Austria"},{value:"Azerbaijan",label:"Azerbaijan"},{value:"Burundi",label:"Burundi"},{value:"Belgium",label:"Belgium"},{value:"Benin",label:"Benin"},{value:"Bonaire, Sint Eustatius and Saba",label:"Bonaire, Sint Eustatius and Saba"},{value:"Burkina Faso",label:"Burkina Faso"},{value:"Bangladesh",label:"Bangladesh"},{value:"Bulgaria",label:"Bulgaria"},{value:"Bahrain",label:"Bahrain"},{value:"Bahamas",label:"Bahamas"},{value:"Bosnia and Herzegovina",label:"Bosnia and Herzegovina"},{value:"Saint Barthélemy",label:"Saint Barthélemy"},{value:"Belarus",label:"Belarus"},{value:"Belize",label:"Belize"},{value:"Bermuda",label:"Bermuda"},{value:"Bolivia, Plurinational State of",label:"Bolivia, Plurinational State of"},{value:"Brazil",label:"Brazil"},{value:"Barbados",label:"Barbados"},{value:"Brunei Darussalam",label:"Brunei Darussalam"},{value:"Bhutan",label:"Bhutan"},{value:"Bouvet Island",label:"Bouvet Island"},{value:"Botswana",label:"Botswana"},{value:"Central African Republic",label:"Central African Republic"},{value:"Canada",label:"Canada"},{value:"Cocos (Keeling) Islands",label:"Cocos (Keeling) Islands"},{value:"Switzerland",label:"Switzerland"},{value:"Chile",label:"Chile"},{value:"China",label:"China"},{value:"Côte d'Ivoire",label:"Côte d'Ivoire"},{value:"Cameroon",label:"Cameroon"},{value:"Congo, The Democratic Republic of the",label:"Congo, The Democratic Republic of the"},{value:"Congo",label:"Congo"},{value:"Cook Islands",label:"Cook Islands"},{value:"Colombia",label:"Colombia"},{value:"Comoros",label:"Comoros"},{value:"Cabo Verde",label:"Cabo Verde"},{value:"Costa Rica",label:"Costa Rica"},{value:"Cuba",label:"Cuba"},{value:"Curaçao",label:"Curaçao"},{value:"Christmas Island",label:"Christmas Island"},{value:"Cayman Islands",label:"Cayman Islands"},{value:"Cyprus",label:"Cyprus"},{value:"Czechia",label:"Czechia"},{value:"Germany",label:"Germany"},{value:"Djibouti",label:"Djibouti"},{value:"Dominica",label:"Dominica"},{value:"Denmark",label:"Denmark"},{value:"Dominican Republic",label:"Dominican Republic"},{value:"Algeria",label:"Algeria"},{value:"Ecuador",label:"Ecuador"},{value:"Egypt",label:"Egypt"},{value:"Eritrea",label:"Eritrea"},{value:"Western Sahara",label:"Western Sahara"},{value:"Spain",label:"Spain"},{value:"Estonia",label:"Estonia"},{value:"Ethiopia",label:"Ethiopia"},{value:"Finland",label:"Finland"},{value:"Fiji",label:"Fiji"},{value:"Falkland Islands (Malvinas)",label:"Falkland Islands (Malvinas)"},{value:"France",label:"France"},{value:"Faroe Islands",label:"Faroe Islands"},{value:"Micronesia, Federated States of",label:"Micronesia, Federated States of"},{value:"Gabon",label:"Gabon"},{value:"United Kingdom",label:"United Kingdom"},{value:"Georgia",label:"Georgia"},{value:"Guernsey",label:"Guernsey"},{value:"Ghana",label:"Ghana"},{value:"Gibraltar",label:"Gibraltar"},{value:"Guinea",label:"Guinea"},{value:"Guadeloupe",label:"Guadeloupe"},{value:"Gambia",label:"Gambia"},{value:"Guinea-Bissau",label:"Guinea-Bissau"},{value:"Equatorial Guinea",label:"Equatorial Guinea"},{value:"Greece",label:"Greece"},{value:"Grenada",label:"Grenada"},{value:"Greenland",label:"Greenland"},{value:"Guatemala",label:"Guatemala"},{value:"French Guiana",label:"French Guiana"},{value:"Guam",label:"Guam"},{value:"Guyana",label:"Guyana"},{value:"Hong Kong",label:"Hong Kong"},{value:"Heard Island and McDonald Islands",label:"Heard Island and McDonald Islands"},{value:"Honduras",label:"Honduras"},{value:"Croatia",label:"Croatia"},{value:"Haiti",label:"Haiti"},{value:"Hungary",label:"Hungary"},{value:"Indonesia",label:"Indonesia"},{value:"Isle of Man",label:"Isle of Man"},{value:"India",label:"India"},{value:"British Indian Ocean Territory",label:"British Indian Ocean Territory"},{value:"Ireland",label:"Ireland"},{value:"Iran, Islamic Republic of",label:"Iran, Islamic Republic of"},{value:"Iraq",label:"Iraq"},{value:"Iceland",label:"Iceland"},{value:"Israel",label:"Israel"},{value:"Italy",label:"Italy"},{value:"Jamaica",label:"Jamaica"},{value:"Jersey",label:"Jersey"},{value:"Jordan",label:"Jordan"},{value:"Japan",label:"Japan"},{value:"Kazakhstan",label:"Kazakhstan"},{value:"Kenya",label:"Kenya"},{value:"Kyrgyzstan",label:"Kyrgyzstan"},{value:"Cambodia",label:"Cambodia"},{value:"Kiribati",label:"Kiribati"},{value:"Saint Kitts and Nevis",label:"Saint Kitts and Nevis"},{value:"Korea, Republic of",label:"Korea, Republic of"},{value:"Kuwait",label:"Kuwait"},{value:"Lao People's Democratic Republic",label:"Lao People's Democratic Republic"},{value:"Lebanon",label:"Lebanon"},{value:"Liberia",label:"Liberia"},{value:"Libya",label:"Libya"},{value:"Saint Lucia",label:"Saint Lucia"},{value:"Liechtenstein",label:"Liechtenstein"},{value:"Sri Lanka",label:"Sri Lanka"},{value:"Lesotho",label:"Lesotho"},{value:"Lithuania",label:"Lithuania"},{value:"Luxembourg",label:"Luxembourg"},{value:"Latvia",label:"Latvia"},{value:"Macao",label:"Macao"},{value:"Saint Martin (French part)",label:"Saint Martin (French part)"},{value:"Morocco",label:"Morocco"},{value:"Monaco",label:"Monaco"},{value:"Moldova, Republic of",label:"Moldova, Republic of"},{value:"Madagascar",label:"Madagascar"},{value:"Maldives",label:"Maldives"},{value:"Mexico",label:"Mexico"},{value:"Marshall Islands",label:"Marshall Islands"},{value:"North Macedonia",label:"North Macedonia"},{value:"Mali",label:"Mali"},{value:"Malta",label:"Malta"},{value:"Myanmar",label:"Myanmar"},{value:"Montenegro",label:"Montenegro"},{value:"Mongolia",label:"Mongolia"},{value:"Northern Mariana Islands",label:"Northern Mariana Islands"},{value:"Mozambique",label:"Mozambique"},{value:"Mauritania",label:"Mauritania"},{value:"Montserrat",label:"Montserrat"},{value:"Martinique",label:"Martinique"},{value:"Mauritius",label:"Mauritius"},{value:"Malawi",label:"Malawi"},{value:"Malaysia",label:"Malaysia"},{value:"Mayotte",label:"Mayotte"},{value:"Namibia",label:"Namibia"},{value:"New Caledonia",label:"New Caledonia"},{value:"Niger",label:"Niger"},{value:"Norfolk Island",label:"Norfolk Island"},{value:"Nigeria",label:"Nigeria"},{value:"Nicaragua",label:"Nicaragua"},{value:"Niue",label:"Niue"},{value:"Netherlands",label:"Netherlands"},{value:"Norway",label:"Norway"},{value:"Nepal",label:"Nepal"},{value:"Nauru",label:"Nauru"},{value:"New Zealand",label:"New Zealand"},{value:"Oman",label:"Oman"},{value:"Pakistan",label:"Pakistan"},{value:"Panama",label:"Panama"},{value:"Pitcairn",label:"Pitcairn"},{value:"Peru",label:"Peru"},{value:"Philippines",label:"Philippines"},{value:"Palau",label:"Palau"},{value:"Papua New Guinea",label:"Papua New Guinea"},{value:"Poland",label:"Poland"},{value:"Puerto Rico",label:"Puerto Rico"},{value:"Korea, Democratic People's Republic of",label:"Korea, Democratic People's Republic of"},{value:"Portugal",label:"Portugal"},{value:"Paraguay",label:"Paraguay"},{value:"Palestine, State of",label:"Palestine, State of"},{value:"French Polynesia",label:"French Polynesia"},{value:"Qatar",label:"Qatar"},{value:"Réunion",label:"Réunion"},{value:"Romania",label:"Romania"},{value:"Russian Federation",label:"Russian Federation"},{value:"Rwanda",label:"Rwanda"},{value:"Saudi Arabia",label:"Saudi Arabia"},{value:"Sudan",label:"Sudan"},{value:"Senegal",label:"Senegal"},{value:"Singapore",label:"Singapore"},{value:"South Georgia and the South Sandwich Islands",label:"South Georgia and the South Sandwich Islands"},{value:"Saint Helena, Ascension and Tristan da Cunha",label:"Saint Helena, Ascension and Tristan da Cunha"},{value:"Svalbard and Jan Mayen",label:"Svalbard and Jan Mayen"},{value:"Solomon Islands",label:"Solomon Islands"},{value:"Sierra Leone",label:"Sierra Leone"},{value:"El Salvador",label:"El Salvador"},{value:"San Marino",label:"San Marino"},{value:"Somalia",label:"Somalia"},{value:"Saint Pierre and Miquelon",label:"Saint Pierre and Miquelon"},{value:"Serbia",label:"Serbia"},{value:"South Sudan",label:"South Sudan"},{value:"Sao Tome and Principe",label:"Sao Tome and Principe"},{value:"Suriname",label:"Suriname"},{value:"Slovakia",label:"Slovakia"},{value:"Slovenia",label:"Slovenia"},{value:"Sweden",label:"Sweden"},{value:"Eswatini",label:"Eswatini"},{value:"Sint Maarten (Dutch part)",label:"Sint Maarten (Dutch part)"},{value:"Seychelles",label:"Seychelles"},{value:"Syrian Arab Republic",label:"Syrian Arab Republic"},{value:"Turks and Caicos Islands",label:"Turks and Caicos Islands"},{value:"Chad",label:"Chad"},{value:"Togo",label:"Togo"},{value:"Thailand",label:"Thailand"},{value:"Tajikistan",label:"Tajikistan"},{value:"Tokelau",label:"Tokelau"},{value:"Turkmenistan",label:"Turkmenistan"},{value:"Timor-Leste",label:"Timor-Leste"},{value:"Tonga",label:"Tonga"},{value:"Trinidad and Tobago",label:"Trinidad and Tobago"},{value:"Tunisia",label:"Tunisia"},{value:"Turkey",label:"Turkey"},{value:"Tuvalu",label:"Tuvalu"},{value:"Taiwan, Province of China",label:"Taiwan, Province of China"},{value:"Tanzania, United Republic of",label:"Tanzania, United Republic of"},{value:"Uganda",label:"Uganda"},{value:"Ukraine",label:"Ukraine"},{value:"United States Minor Outlying Islands",label:"United States Minor Outlying Islands"},{value:"Uruguay",label:"Uruguay"},{value:"United States",label:"United States"},{value:"Uzbekistan",label:"Uzbekistan"},{value:"Holy See (Vatican City State)",label:"Holy See (Vatican City State)"},{value:"Saint Vincent and the Grenadines",label:"Saint Vincent and the Grenadines"},{value:"Venezuela, Bolivarian Republic of",label:"Venezuela, Bolivarian Republic of"},{value:"Virgin Islands, British",label:"Virgin Islands, British"},{value:"Virgin Islands, U.S.",label:"Virgin Islands, U.S."},{value:"Viet Nam",label:"Viet Nam"},{value:"Vanuatu",label:"Vanuatu"},{value:"Wallis and Futuna",label:"Wallis and Futuna"},{value:"Samoa",label:"Samoa"},{value:"Yemen",label:"Yemen"},{value:"South Africa",label:"South Africa"},{value:"Zambia",label:"Zambia"},{value:"Zimbabwe",label:"Zimbabwe"}],[j,b]=x.useState([]);x.useEffect(()=>{(async()=>{var c;try{const d=(c=(await le()).data)==null?void 0:c.users.map(i=>({value:i._id,label:`${i.firstName} ${i.lastName}`,role:i.role}));b(d)}catch(a){console.error("Failed to fetch users",a)}})()},[]);const h=(n,c)=>{const d=[...n.customExpenses||[],{name:"",amount:0}];c("customExpenses",d)},m=(n,c,a)=>{const i=[...c.customExpenses||[]];i.splice(n,1),a("customExpenses",i)},r=(n,c,a,d,i)=>{const S=[...d.customExpenses||[]];S[n]={...S[n],[c]:c==="amount"?Number(a)||0:a},i("customExpenses",S)};return e.jsx(X,{innerRef:v,initialValues:C,validationSchema:f,onSubmit:async(n,{setSubmitting:c})=>{try{await I(n,c)}catch(a){c(!1),console.error("Form submission error:",a)}},enableReinitialize:!0,children:({values:n,touched:c,errors:a,isSubmitting:d,setFieldValue:i,handleBlur:s})=>{var S;return e.jsx(Q,{children:e.jsxs($,{children:[e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsxs(ae,{divider:!0,className:"mb-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h5",{className:"text-lg font-semibold mb-4 border-b pb-2",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(t,{label:"EMPLOYEE",invalid:!!a.employee,errorMessage:a.employee,children:e.jsx(H,{name:"employee",placeholder:"Select employee",value:j.find(l=>l.value===n.employee),options:j,onChange:l=>{i("employee",l==null?void 0:l.value),i("designation",l==null?void 0:l.role)},onBlur:s})}),e.jsx(t,{label:"DESIGNATION",invalid:!!a.designation,errorMessage:a.designation,children:e.jsx(o,{name:"designation",value:n.designation,readOnly:!0,onBlur:s})}),e.jsx(t,{label:"COUNTRY",invalid:!!a.country,errorMessage:a.country,children:e.jsx(H,{name:"country",value:A.find(l=>l.value===n.country),options:A,onChange:l=>i("country",l==null?void 0:l.value),onBlur:s})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h5",{className:"text-lg font-semibold mb-4 border-b pb-2",children:"Salary Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(t,{label:"BASIC SALARY",invalid:!!a.basicSalary,errorMessage:a.basicSalary,children:e.jsx(o,{type:"number",name:"basicSalary",value:n.basicSalary,onChange:l=>{const p=Number(l.target.value)||0;i("basicSalary",p)},onBlur:s})}),e.jsx(t,{label:"ALLOWANCE",invalid:!!a.allowance,errorMessage:a.allowance,children:e.jsx(o,{type:"number",name:"allowance",value:n.allowance,onChange:l=>{const p=Number(l.target.value)||0;i("allowance",p)},onBlur:s})}),e.jsx(t,{label:"TOTAL SALARY",invalid:!!a.totalSalary,errorMessage:a.totalSalary,children:e.jsx(o,{type:"number",name:"totalSalary",value:n.totalSalary,onChange:l=>i("totalSalary",Number(l.target.value)||0),onBlur:s})}),e.jsx(t,{label:"2 YEARS SALARY",invalid:!!a.twoYearSalary,errorMessage:a.twoYearSalary,children:e.jsx(o,{type:"number",name:"twoYearSalary",value:n.twoYearSalary,onChange:l=>i("twoYearSalary",Number(l.target.value)||0),onBlur:s})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h5",{className:"text-lg font-semibold mb-4 border-b pb-2",children:"Expenses Breakdown"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(t,{label:"PER YEAR EXPENSES",invalid:!!a.perYearExpenses,errorMessage:a.perYearExpenses,children:e.jsx(o,{type:"number",name:"perYearExpenses",value:n.perYearExpenses,onChange:l=>i("perYearExpenses",Number(l.target.value)||0),onBlur:s})}),e.jsx(t,{label:"PER MONTH EXPENSES",invalid:!!a.perMonthExpenses,errorMessage:a.perMonthExpenses,children:e.jsx(o,{type:"number",name:"perMonthExpenses",value:n.perMonthExpenses,onChange:l=>i("perMonthExpenses",Number(l.target.value)||0),onBlur:s})}),e.jsx(t,{label:"PER DAY EXPENSES",invalid:!!a.perDayExpenses,errorMessage:a.perDayExpenses,children:e.jsx(o,{type:"number",name:"perDayExpenses",value:n.perDayExpenses,onChange:l=>i("perDayExpenses",Number(l.target.value)||0),onBlur:s})}),e.jsx(t,{label:"TOTAL EXPENSES PER PERSON (2 YEAR)",invalid:!!a.totalExpensesPerPerson,errorMessage:a.totalExpensesPerPerson,children:e.jsx(o,{type:"number",name:"totalExpensesPerPerson",value:n.totalExpensesPerPerson,onChange:l=>i("totalExpensesPerPerson",Number(l.target.value)||0),onBlur:s})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h5",{className:"text-lg font-semibold mb-4 border-b pb-2",children:"Detailed Expenses"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(t,{label:"VISA EXPENSES",invalid:!!a.visaExpenses,errorMessage:a.visaExpenses,children:e.jsx(o,{type:"number",name:"visaExpenses",value:n.visaExpenses,onChange:l=>i("visaExpenses",Number(l.target.value)||0),onBlur:s})}),e.jsx(t,{label:"2 YEAR UNIFORM (3 SET PER 6 MONTH)",invalid:!!a.twoYearUniform,errorMessage:a.twoYearUniform,children:e.jsx(o,{type:"number",name:"twoYearUniform",value:n.twoYearUniform,onChange:l=>i("twoYearUniform",Number(l.target.value)||0),onBlur:s})}),e.jsx(t,{label:"SHOES",invalid:!!a.shoes,errorMessage:a.shoes,children:e.jsx(o,{type:"number",name:"shoes",value:n.shoes,onChange:l=>i("shoes",Number(l.target.value)||0),onBlur:s})}),e.jsx(t,{label:"2 YEAR ACCOMMODATION + OFFICE RENT",invalid:!!a.twoYearAccommodation,errorMessage:a.twoYearAccommodation,children:e.jsx(o,{type:"number",name:"twoYearAccommodation",value:n.twoYearAccommodation,onChange:l=>i("twoYearAccommodation",Number(l.target.value)||0),onBlur:s})}),e.jsx(t,{label:"SEWA BILLS 2 YEAR",invalid:!!a.sewaBills,errorMessage:a.sewaBills,children:e.jsx(o,{type:"number",name:"sewaBills",value:n.sewaBills,onChange:l=>i("sewaBills",Number(l.target.value)||0),onBlur:s})}),e.jsx(t,{label:"DEWA BILLS 2 YEAR",invalid:!!a.dewaBills,errorMessage:a.dewaBills,children:e.jsx(o,{type:"number",name:"dewaBills",value:n.dewaBills,onChange:l=>i("dewaBills",Number(l.target.value)||0),onBlur:s})}),e.jsx(t,{label:"WORKMAN COMPENSATION INSURANCE",invalid:!!a.insurance,errorMessage:a.insurance,children:e.jsx(o,{type:"number",name:"insurance",value:n.insurance,onChange:l=>i("insurance",Number(l.target.value)||0),onBlur:s})}),e.jsx(t,{label:"TRANSPORT",invalid:!!a.transport,errorMessage:a.transport,children:e.jsx(o,{type:"number",name:"transport",value:n.transport,onChange:l=>i("transport",Number(l.target.value)||0),onBlur:s})}),e.jsx(t,{label:"WATER",invalid:!!a.water,errorMessage:a.water,children:e.jsx(o,{type:"number",name:"water",value:n.water,onChange:l=>i("water",Number(l.target.value)||0),onBlur:s})}),e.jsx(t,{label:"THIRD PARTY LIABILITIES",invalid:!!a.thirdPartyLiabilities,errorMessage:a.thirdPartyLiabilities,children:e.jsx(o,{type:"number",name:"thirdPartyLiabilities",value:n.thirdPartyLiabilities,onChange:l=>i("thirdPartyLiabilities",Number(l.target.value)||0),onBlur:s})}),e.jsx(t,{label:"FAIRMONT CERTIFICATE",invalid:!!a.fairmontCertificate,errorMessage:a.fairmontCertificate,children:e.jsx(o,{type:"number",name:"fairmontCertificate",value:n.fairmontCertificate,onChange:l=>i("fairmontCertificate",Number(l.target.value)||0),onBlur:s})}),e.jsx(t,{label:"LEAVE SALARY",invalid:!!a.leaveSalary,errorMessage:a.leaveSalary,children:e.jsx(o,{type:"number",name:"leaveSalary",value:n.leaveSalary,onChange:l=>i("leaveSalary",Number(l.target.value)||0),onBlur:s})}),e.jsx(t,{label:"TICKET (UP AND DOWN)",invalid:!!a.ticket,errorMessage:a.ticket,children:e.jsx(o,{type:"number",name:"ticket",value:n.ticket,onChange:l=>i("ticket",Number(l.target.value)||0),onBlur:s})}),e.jsx(t,{label:"GRATUITY",invalid:!!a.gratuity,errorMessage:a.gratuity,children:e.jsx(o,{type:"number",name:"gratuity",value:n.gratuity,onChange:l=>i("gratuity",Number(l.target.value)||0),onBlur:s})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[e.jsx("h5",{className:"text-lg font-semibold",children:((S=n==null?void 0:n.customExpenses)==null?void 0:S.length)>0?"Additional Custom Expenses":""}),e.jsx(N,{size:"sm",variant:"plain",icon:e.jsx(_,{}),onClick:()=>h(n,i),children:"Add Custom Expense"})]}),(n.customExpenses||[]).map((l,p)=>{var q,L,Y,k,G,U,O,D;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4 items-end",children:[e.jsx(t,{label:"Expense Name",invalid:!!((L=(q=a.customExpenses)==null?void 0:q[p])!=null&&L.name),errorMessage:(k=(Y=a.customExpenses)==null?void 0:Y[p])==null?void 0:k.name,children:e.jsx(o,{value:l.name,onChange:P=>r(p,"name",P.target.value,n,i)})}),e.jsx(t,{label:"Amount",invalid:!!((U=(G=a.customExpenses)==null?void 0:G[p])!=null&&U.amount),errorMessage:(D=(O=a.customExpenses)==null?void 0:O[p])==null?void 0:D.amount,children:e.jsx(o,{type:"number",value:l.amount,onChange:P=>r(p,"amount",P.target.value,n,i)})}),e.jsx(N,{type:"button",variant:"plain",color:"red",icon:e.jsx(z,{}),onClick:()=>m(p,n,i),children:"Remove"})]},p)})]})]})}),e.jsxs(Z,{className:"-mx-8 px-8 flex items-center justify-between py-4",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[e.jsx("div",{children:w==="edit"&&E&&e.jsx(N,{size:"sm",variant:"plain",color:"red",icon:e.jsx(z,{}),type:"button",onClick:()=>E(()=>{}),children:"Delete"})}),e.jsxs("div",{className:"md:flex items-center",children:[e.jsx(N,{size:"sm",className:"ltr:mr-3 rtl:ml-3",type:"button",onClick:()=>y==null?void 0:y(),children:"Discard"}),e.jsx(N,{size:"sm",variant:"solid",loading:d,icon:e.jsx(V,{}),type:"submit",children:"Save"})]})]})]})})}})});F.displayName="LabourExpensesForm";const R={employee:"",designation:"",country:"",basicSalary:0,allowance:0,total:0,twoYearSalary:0,visaExpenses:0,twoYearUniform:0,shoes:0,twoYearAccommodation:0,sewaBills:0,dewaBills:0,insurance:0,transport:0,water:0,thirdPartyLiabilities:0,fairmontCertificate:0,leaveSalary:0,ticket:0,gratuity:0},oa=()=>{const g=J(),{id:v}=W(),[w,C]=x.useState(R),[I,y]=x.useState(!!v),[E,f]=x.useState(null);x.useEffect(()=>{if(!v){C(R),y(!1);return}(async()=>{var h;try{y(!0);const m=await ne(v);if(!(m!=null&&m.data))throw new Error("Invalid labour expenses data received");const r=Array.isArray(m.data.expenses)?m.data.expenses[0]:m.data,n={...r,employee:((h=r.employee)==null?void 0:h._id)||"",designation:r.designation||"",country:r.country||"",basicSalary:Number(r.basicSalary)||0,allowance:Number(r.allowance)||0,total:Number(r.total)||0,twoYearSalary:Number(r.twoYearSalary)||0,visaExpenses:Number(r.visaExpenses)||0,twoYearUniform:Number(r.twoYearUniform)||0,shoes:Number(r.shoes)||0,twoYearAccommodation:Number(r.twoYearAccommodation)||0,sewaBills:Number(r.sewaBills)||0,dewaBills:Number(r.dewaBills)||0,insurance:Number(r.insurance)||0,transport:Number(r.transport)||0,water:Number(r.water)||0,thirdPartyLiabilities:Number(r.thirdPartyLiabilities)||0,fairmontCertificate:Number(r.fairmontCertificate)||0,leaveSalary:Number(r.leaveSalary)||0,ticket:Number(r.ticket)||0,gratuity:Number(r.gratuity)||0};C(n),f(null)}catch(m){console.error("Error fetching labour expenses report:",m),f(m.message||"Failed to load report data"),T.push(e.jsx(M,{title:"Failed to fetch labour expenses report data",type:"danger",duration:2500,children:m.message||"Something went wrong"}),{placement:"top-center"}),setTimeout(()=>g("/app/labour-expenses-view"),2500)}finally{y(!1)}})()},[v,g]);const A=async(b,h)=>{var m,r,n,c;try{h(!0);const a={reportType:"labour-expenses",...b,basicSalary:Number(b.basicSalary),allowance:Number(b.allowance),total:Number(b.total),twoYearSalary:Number(b.twoYearSalary),visaExpenses:Number(b.visaExpenses),twoYearUniform:Number(b.twoYearUniform),shoes:Number(b.shoes),twoYearAccommodation:Number(b.twoYearAccommodation),sewaBills:Number(b.sewaBills),dewaBills:Number(b.dewaBills),insurance:Number(b.insurance),transport:Number(b.transport),water:Number(b.water),thirdPartyLiabilities:Number(b.thirdPartyLiabilities),fairmontCertificate:Number(b.fairmontCertificate),leaveSalary:Number(b.leaveSalary),ticket:Number(b.ticket),gratuity:Number(b.gratuity)},d=v?await ie(v,a):await re(a);if([200,201].includes(d.status))T.push(e.jsxs(M,{title:`Successfully ${v?"updated":"added"} labour expenses `,type:"success",duration:2500,children:["Labour expenses ",v?"updated":"added"," successfully"]}),{placement:"top-center"}),g("/app/labour-expenses-report-view");else throw new Error(((r=(m=d==null?void 0:d.response)==null?void 0:m.data)==null?void 0:r.message)||"Unexpected status code")}catch(a){console.error("Error during form submission:",a),T.push(e.jsx(M,{title:`Error ${v?"updating":"adding"} labour expenses report`,type:"danger",duration:2500,children:((c=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:c.message)||a.message}),{placement:"top-center"})}finally{h(!1)}},j=()=>{JSON.stringify(w)!==JSON.stringify(R)?window.confirm("Are you sure you want to discard changes?")&&g("/app/labour-expenses-view"):g("/app/labour-expenses-view")};return I?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):E?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(M,{title:"Error loading labour expenses report",type:"danger",children:E})}):e.jsx(F,{type:v?"edit":"new",initialData:w,onFormSubmit:A,onDiscard:j})};export{oa as default};
