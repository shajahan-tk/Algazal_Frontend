import{an as p}from"./index-CDUqAS1l.js";const h=async(e,o)=>{try{const t=new FormData,{items:a,...n}=e,r=a.map(i=>{const{image:s,...c}=i;return c});return t.append("data",JSON.stringify({...n,items:r,project:e.projectId,estimation:e.estimationId})),o&&o.length>0&&o.forEach((i,s)=>{i&&t.append(`items[${s}][image]`,i)}),(await p.post("/quotation",t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){throw console.error("Error creating quotation:",t),t}},y=async(e,o,t)=>{try{const a=new FormData,{items:n,...r}=o,d=(n==null?void 0:n.map(s=>{const{image:c,...m}=s;return m}))||[];return a.append("data",JSON.stringify({...r,items:d,project:o.projectId,estimation:o.estimationId})),t&&t.length>0&&t.forEach((s,c)=>{s&&a.append(`items[${c}][image]`,s)}),(await p.put(`/quotation/${e}`,a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){throw console.error("Error updating quotation:",a),a}},g=async e=>{try{return(await p.get(`/quotation/project/${e}`)).data}catch(o){throw console.error("Error fetching quotation:",o),o}},w=async(e,o)=>{try{const t=await p.get(`/quotation/${e}/generate-pdf`,{responseType:"arraybuffer",headers:{Accept:"application/pdf"}});if(!t.data||t.data.byteLength===0)throw new Error("Received empty PDF data");const a=new Blob([t.data],{type:"application/pdf"}),n=window.URL.createObjectURL(a),r=document.createElement("a");r.href=n,r.download=o||`estimation-${e}.pdf`,r.style.display="none",document.body.appendChild(r),r.click(),setTimeout(()=>{document.body.removeChild(r),window.URL.revokeObjectURL(n)},100)}catch(t){throw console.error("PDF Download Error:",t),t}};export{h as c,w as d,g,y as u};
