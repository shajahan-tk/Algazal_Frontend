import{r as t,j as s,c as N,ap as fe,ah as Ce,aq as pe}from"./index-CfFwh--H.js";import{i as q}from"./toString-tgkm5ft3.js";import{u as U}from"./useUniqueId-C3QGMlyo.js";import{A as ve}from"./index-CbqZmROt.js";import{m as xe}from"./proxy-DVFC3BrG.js";import{c as L}from"./chainedFunction-BxZSneMW.js";import{ap as ae,aq as ie,ar as he,as as be}from"./index-CEOENyZN.js";const ee=t.createContext(null),ge=ee.Provider;function ce(e){const n=t.useRef(null);return e||n}const V=t.createContext({}),le=V.Provider;V.Consumer;function ne(e){const[n,d]=t.useState(!1),[o,C]=t.useState([]),[a,c]=t.useState(null),r=t.useRef(null),p=t.useCallback((i,l)=>{C(b=>[...b,{element:i,props:l}])},[]),m=t.useCallback(i=>{C(l=>l.filter(b=>{var v;return((v=b==null?void 0:b.element)==null?void 0:v.id)!==i}))},[]),x=t.useCallback(()=>{requestAnimationFrame(()=>{var i;document.activeElement!==e.current&&(r.current=document.activeElement,(i=e.current)==null||i.focus())})},[e]),f=t.useCallback(i=>{const l=o.indexOf(i);l!==-1&&(c(l),x())},[o,x]),u=t.useCallback((i,l)=>{var b;for(let v=i;v>-1&&v<o.length;v+=l)if(!((b=o[v].props)!=null&&b.disabled))return v;return null},[o]),M=t.useCallback(i=>{if(q(i))c(null),x();else{let l;i===0?l=u(0,1):i===-1&&(l=u(o.length-1,-1)),q(l)||f(o[l])}},[o,f,x,u]),w=t.useCallback(()=>{d(!0),x()},[x]),E=t.useCallback(()=>{d(!1),c(null),requestAnimationFrame(()=>{var i;(i=r.current)==null||i.focus()})},[]);return{open:n,items:o,activeItemIndex:a,registerItem:p,unregisterItem:m,focusItemAt:M,openMenu:w,closeMenu:E}}const Q=t.forwardRef((e,n)=>{const{children:d,activeKey:o,onSelect:C,hidden:a,placement:c,menuClass:r,...p}=e,m=ce(n),x=U("menu-"),f=ne(m),u=i=>{const l=`rotateX(${i}deg)`;return c&&c.includes("center")?`${l} translateX(-50%)`:l},M={opacity:1,visibility:"visible",transform:u(0)},w={opacity:0,visibility:"hidden",transform:u(40)},E=w;return s.jsx(ge,{value:{activeKey:o,onSelect:C},children:s.jsx(le,{value:f,children:s.jsx(ve,{mode:"wait",children:!a&&s.jsx(xe.ul,{ref:m,id:x,initial:E,animate:M,exit:w,transition:{duration:.15,type:"tween"},className:r,...p,children:d})})})})});Q.displayName="DropdownInnerMenu";const X=t.createContext(null);X.Provider;X.Consumer;const Z=t.forwardRef((e,n)=>{const{asElement:d="div",children:o,className:C,disabled:a,eventKey:c,isActive:r,menuItemHeight:p=35,onSelect:m,style:x,variant:f="light",...u}=e,i=N("menu-item",`menu-item-${f}`,r&&"menu-item-active",a&&"menu-item-disabled",!a&&"menu-item-hoverable",C),l=b=>{m&&m(c,b)};return s.jsx(d,{ref:n,className:i,style:{height:`${p}px`,...x},onClick:l,...u,children:o})});Z.displayName="BaseMenuItem";const{DEFAULT:Me,DIVIDER:oe,HEADER:Y,CUSTOM:z}=fe,te=t.forwardRef((e,n)=>{const{asElement:d="li",children:o,active:C,disabled:a,className:c,submenu:r,style:p,eventKey:m,onClick:x,onSelect:f,variant:u=Me,...M}=e,{mode:w,direction:E}=Ce(),i=ce(n),l=U("menu-item-"),b=t.useRef(null),v=t.useContext(X),h=t.useContext(ee),_=t.useContext(V),g=ne(b),F=g.open,I=C||!q(h==null?void 0:h.activeKey)&&(h==null?void 0:h.activeKey)===m||!q(v==null?void 0:v.activeKey)&&(v==null?void 0:v.activeKey)===m,j=t.useCallback(()=>{r&&(g.openMenu(),g.focusItemAt(0))},[r,g]),O=t.useCallback(S=>{var $;f==null||f(m,S),($=h==null?void 0:h.onSelect)==null||$.call(h,m,S)},[m,f,h]),B=t.useCallback(S=>{a||(r?j():O(S))},[a,r,j,O]),y=t.useCallback(()=>{r&&g.openMenu()},[r,g]),R=t.useCallback(()=>{r&&g.closeMenu()},[r,g]),k={onClick:L(B,x)},{registerItem:A,unregisterItem:P}=_??{};if(r&&(k.onMouseOver=y,k.onMouseOut=R),t.useEffect(()=>(u!==oe&&u!==Y&&(A==null||A(i.current,{disabled:a})),()=>{P==null||P(l)}),[A,P,i,l,a,u]),u===oe||u===Y||u===z)return s.jsx(d,{ref:i,id:l,style:p,className:N(`menu-item-${u}`,c),...u===z?k:{},...M,children:(u===Y||u===z)&&o});function K(){return t.isValidElement(o)?t.cloneElement(o):o}function D(){return r?s.jsx(le,{value:g,children:t.cloneElement(r,{ref:b,hidden:!F})}):null}return r?s.jsxs("li",{...M,style:p,className:"relative",...k,children:[s.jsxs(Z,{ref:i,asElement:"div",id:l,isActive:I,eventKey:m,variant:w,className:N("dropdown-submenu-item",c),children:[s.jsx("span",{children:o}),E==="rtl"?s.jsx(ae,{}):s.jsx(ie,{})]}),D()]}):s.jsxs(Z,{ref:i,asElement:"li",style:p,isActive:I,disabled:a,eventKey:m,variant:w,className:c,...k,...M,children:[K(),D()]})});te.displayName="DropdownItem";const se=t.forwardRef((e,n)=>{const{eventKey:d,title:o,className:C,placement:a,...c}=e,r=t.useContext(ee),p="dropdown-menu",x=N(p,a,C),f=N(p,"dropdown-submenu"),u=s.jsx(Q,{ref:n,className:f,placement:a,...c});if(r){const M=N(C);return s.jsx(te,{className:M,submenu:u,eventKey:d,children:o})}return s.jsx(Q,{ref:n,className:x,placement:a,...c})});se.displayName="DropdownMenu";const we=({placement:e,children:n})=>e&&e.includes("middle-start")?s.jsxs(s.Fragment,{children:[n,s.jsx(ie,{})]}):e&&e.includes("middle-end")?s.jsxs(s.Fragment,{children:[s.jsx(ae,{}),n]}):e&&e.includes("top")?s.jsxs(s.Fragment,{children:[n,s.jsx(he,{})]}):s.jsxs(s.Fragment,{children:[n,s.jsx(be,{})]}),ue=t.forwardRef((e,n)=>{const{className:d,renderTitle:o,children:C,placement:a="bottom-start",disabled:c,toggleClassName:r,...p}=e,f=N("dropdown-toggle",d,r,c&&"dropdown-toggle-disabled"),u=N(f,"dropdown-toggle-default");return o?s.jsx("div",{className:f,...p,ref:n,children:o}):s.jsx("div",{ref:n,className:u,...p,children:s.jsx("span",{className:"flex items-center",children:s.jsx(we,{placement:a,children:C})})})});ue.displayName="DropdownToggle";const re=(e,n)=>{if(e.contains)return e.contains(n);if(e.compareDocumentPosition)return e===n||!!(e.compareDocumentPosition(n)&16);if(n)do if(n===e)return!0;while(n=n.parentNode);return!1},ye=e=>e&&("current"in e?e.current:e);function G(e){const n=(e==null?void 0:e.root)||(e==null?void 0:e.child)||ye(e);return n!=null&&n.nodeType&&typeof(n==null?void 0:n.nodeName)=="string",n}function Ee(e){return(e==null?void 0:e.button)===0}function Ie(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e!=null&&e.shiftKey)}function Ne(e,n,d,o=!1){return e.addEventListener(n,d,o),{off(){e.removeEventListener(n,d,o)}}}function je(e,{disabled:n,triggerTarget:d,overlayTarget:o}){const C=t.useCallback(a=>{const c=G(d),r=G(o);c&&re(c,a.target)||r&&re(r,a.target)||Ie(a)||!Ee(a)||e==null||e(a)},[e,d,o]);t.useEffect(()=>{const a=G(d);if(n||!a)return;const r=Ne(a&&a.ownerDocument||document,"mousedown",C,!0);return()=>{r==null||r.off()}},[d,n,e,C])}function J(e,n){return Array.isArray(n)?n.indexOf(e)>=0:e===n}const{BOTTOM_START:ke}=pe,De="click",Ae="hover",Pe="context",de=t.forwardRef((e,n)=>{const{title:d,children:o,menuClass:C,menuStyle:a,disabled:c,renderTitle:r,placement:p=ke,activeKey:m,toggleClassName:x,trigger:f="click",style:u,onClick:M,onMouseEnter:w,onMouseLeave:E,onContextMenu:i,onSelect:l,onOpen:b,onClose:v,onToggle:h,..._}=e,g=t.useRef(null),F=t.useRef(null),I=ne(g),j=I.open,O=U("dropdown-toggle-"),B=U("base-menu-"),y=t.useCallback(T=>{const H=typeof T>"u"?!j:T,W=H?b:v;W==null||W(),h==null||h(H),H?I.openMenu():I.closeMenu()},[v,b,h,j,I]),R=t.useCallback(T=>{T.preventDefault(),!c&&y()},[c,y]),k=t.useCallback(()=>{c||y(!0)},[c,y]),A=t.useCallback(()=>{c||y(!1)},[c,y]),P=(T,H)=>{l==null||l(T,H),y(!1)};je(()=>y(),{triggerTarget:F,overlayTarget:g,disabled:!j});const K={onMouseEnter:w,onMouseLeave:E},D={onClick:M,onContextMenu:i};J(De,f)&&(D.onClick=L(R,D.onClick)),J(Pe,f)&&(D.onContextMenu=L(R,i)),J(Ae,f)&&(K.onMouseEnter=L(k,w),K.onMouseLeave=L(A,E));const S=s.jsx(ue,{..._,...D,ref:F,id:O,className:x,renderTitle:r,disabled:c,placement:p,children:d}),$=s.jsx(se,{ref:g,className:C,style:a,activeKey:m,hidden:!j,placement:p,id:B,onSelect:P,children:o});return s.jsx(X.Provider,{value:{activeKey:m},children:s.jsxs("div",{...K,ref:n,style:u,className:"dropdown",children:[S,s.jsx(V.Provider,{value:I,children:$})]})})});de.displayName="Dropdown";const me=de;me.Item=te;me.Menu=se;export{me as D,Z as M};
