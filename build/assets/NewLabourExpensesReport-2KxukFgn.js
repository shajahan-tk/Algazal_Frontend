import{r as g,j as e,v as W,ak as $}from"./index-CfFwh--H.js";import{N as k,t as D}from"./toast-CZz_7xZu.js";import{F as Z,a as t}from"./FormItem-CrM3E5oZ.js";import{B as M}from"./Button-DK8YG6Vd.js";import{S as X}from"./StickyFooter-DkUgER91.js";import{F as Q,a as _}from"./formik.esm-L7JVMBJt.js";import{a as V,A as ee}from"./index-rtDifbQS.js";import{$ as K}from"./index-CEOENyZN.js";import{c as F,e as ae,g as u,b as G}from"./index.esm-CDTj4fG4.js";import"./Alert-8oOn-LBQ.js";import"./index-CSFznbuf.js";import"./Badge-Bo_BJ3HY.js";import"./index-Tb9TnHR2.js";import"./Card-DrR7Wowt.js";import"./Skeleton-CkbmhpF1.js";import"./Dialog-CCGqt-e6.js";import"./Drawer-rdVC219j.js";import"./index-Cqj_MPfk.js";import"./useUniqueId-C3QGMlyo.js";import{I as o}from"./Input-CT3ndZ0a.js";import"./index-e68N8ix-.js";import"./index-DuV_W8Ok.js";import"./index-BhqUyqjr.js";import"./index-DbLmEKzF.js";import"./ScrollBar-BGjE3Qe3.js";import{S as H}from"./Select-DXgitA5g.js";import"./Upload-C3hi9liu.js";import"./index-uPavB4wA.js";import"./Tag-CDky4RgO.js";import{A as le}from"./AdaptableCard-T1jSCi4m.js";import"./Views-DDo_d-60.js";import"./chart.config-46MU3zdR.js";import"./DataTable-B06t5ZtT.js";import"./SvgIcon-r4E3aiGi.js";import"./SegmentItemOption-BO4J9Vay.js";import{n as ne,H as ie,I as re,J as te}from"./api-BL2eMQch.js";import"./StatusIcon-CVY_iJbr.js";import"./CloseButton-BXsrAn2U.js";import"./chainedFunction-BxZSneMW.js";import"./proxy-DVFC3BrG.js";import"./context-ClB8cHxu.js";import"./index-CbqZmROt.js";import"./cloneDeep-DJN0yfLA.js";import"./hoist-non-react-statics.cjs-ByyYtpKF.js";import"./floating-ui.react-DGPs_AnH.js";import"./floating-ui.dom-B_iSk-nO.js";import"./useControllableState-e9pFJmGN.js";import"./_getPrototype-QbS_EcaU.js";import"./index-C6dvUS2c.js";import"./toString-tgkm5ft3.js";import"./index-DYO9xx5Q.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./index-LGebAmfn.js";import"./index-WfMoUKkC.js";import"./useThemeClass-Rhgp5cBq.js";const J=g.forwardRef((y,p)=>{const{type:j,initialData:B={employee:"",designation:"",country:"",basicSalary:0,allowance:0,totalSalary:0,twoYearSalary:0,perYearExpenses:0,perMonthExpenses:0,perDayExpenses:0,totalExpensesPerPerson:0,visaExpenses:0,twoYearUniform:0,shoes:0,twoYearAccommodation:0,sewaBills:0,dewaBills:0,insurance:0,transport:0,water:0,thirdPartyLiabilities:0,fairmontCertificate:0,leaveSalary:0,ticket:0,gratuity:0,customExpenses:[]},onFormSubmit:U,onDiscard:h,onDelete:N}=y,P=F().shape({employee:G().required("Employee is required"),designation:G().required("Designation is required"),country:G().required("Country is required"),basicSalary:u().required("Basic salary is required").min(0,"Basic salary cannot be negative"),allowance:u().required("Allowance is required").min(0,"Allowance cannot be negative"),totalSalary:u().required("Total salary is required").min(0,"Total salary cannot be negative"),twoYearSalary:u().required("Two year salary is required").min(0,"Two year salary cannot be negative"),perYearExpenses:u().required("Per year expenses are required").min(0,"Expenses cannot be negative"),perMonthExpenses:u().required("Per month expenses are required").min(0,"Expenses cannot be negative"),perDayExpenses:u().required("Per day expenses are required").min(0,"Expenses cannot be negative"),totalExpensesPerPerson:u().required("Total expenses per person are required").min(0,"Expenses cannot be negative"),visaExpenses:u().required("Visa expenses are required").min(0,"Expenses cannot be negative"),twoYearUniform:u().required("Two year uniform cost is required").min(0,"Cost cannot be negative"),shoes:u().required("Shoes cost is required").min(0,"Cost cannot be negative"),twoYearAccommodation:u().required("Two year accommodation cost is required").min(0,"Cost cannot be negative"),sewaBills:u().required("SEWA bills are required").min(0,"Bills cannot be negative"),dewaBills:u().required("DEWA bills are required").min(0,"Bills cannot be negative"),insurance:u().required("Insurance cost is required").min(0,"Cost cannot be negative"),transport:u().required("Transport cost is required").min(0,"Cost cannot be negative"),water:u().required("Water cost is required").min(0,"Cost cannot be negative"),thirdPartyLiabilities:u().required("Third party liabilities are required").min(0,"Amount cannot be negative"),fairmontCertificate:u().required("Fairmont certificate cost is required").min(0,"Cost cannot be negative"),leaveSalary:u().required("Leave salary is required").min(0,"Amount cannot be negative"),ticket:u().required("Ticket cost is required").min(0,"Cost cannot be negative"),gratuity:u().required("Gratuity amount is required").min(0,"Amount cannot be negative"),customExpenses:ae().of(F().shape({name:G().required("Custom expense name is required"),amount:u().required("Custom expense amount is required").min(0,"Amount cannot be negative")}))}),I=[{value:"Aruba",label:"Aruba"},{value:"Afghanistan",label:"Afghanistan"},{value:"Angola",label:"Angola"},{value:"Anguilla",label:"Anguilla"},{value:"Åland Islands",label:"Åland Islands"},{value:"Albania",label:"Albania"},{value:"Andorra",label:"Andorra"},{value:"United Arab Emirates",label:"United Arab Emirates"},{value:"Argentina",label:"Argentina"},{value:"Armenia",label:"Armenia"},{value:"American Samoa",label:"American Samoa"},{value:"Antarctica",label:"Antarctica"},{value:"French Southern Territories",label:"French Southern Territories"},{value:"Antigua and Barbuda",label:"Antigua and Barbuda"},{value:"Australia",label:"Australia"},{value:"Austria",label:"Austria"},{value:"Azerbaijan",label:"Azerbaijan"},{value:"Burundi",label:"Burundi"},{value:"Belgium",label:"Belgium"},{value:"Benin",label:"Benin"},{value:"Bonaire, Sint Eustatius and Saba",label:"Bonaire, Sint Eustatius and Saba"},{value:"Burkina Faso",label:"Burkina Faso"},{value:"Bangladesh",label:"Bangladesh"},{value:"Bulgaria",label:"Bulgaria"},{value:"Bahrain",label:"Bahrain"},{value:"Bahamas",label:"Bahamas"},{value:"Bosnia and Herzegovina",label:"Bosnia and Herzegovina"},{value:"Saint Barthélemy",label:"Saint Barthélemy"},{value:"Belarus",label:"Belarus"},{value:"Belize",label:"Belize"},{value:"Bermuda",label:"Bermuda"},{value:"Bolivia, Plurinational State of",label:"Bolivia, Plurinational State of"},{value:"Brazil",label:"Brazil"},{value:"Barbados",label:"Barbados"},{value:"Brunei Darussalam",label:"Brunei Darussalam"},{value:"Bhutan",label:"Bhutan"},{value:"Bouvet Island",label:"Bouvet Island"},{value:"Botswana",label:"Botswana"},{value:"Central African Republic",label:"Central African Republic"},{value:"Canada",label:"Canada"},{value:"Cocos (Keeling) Islands",label:"Cocos (Keeling) Islands"},{value:"Switzerland",label:"Switzerland"},{value:"Chile",label:"Chile"},{value:"China",label:"China"},{value:"Côte d'Ivoire",label:"Côte d'Ivoire"},{value:"Cameroon",label:"Cameroon"},{value:"Congo, The Democratic Republic of the",label:"Congo, The Democratic Republic of the"},{value:"Congo",label:"Congo"},{value:"Cook Islands",label:"Cook Islands"},{value:"Colombia",label:"Colombia"},{value:"Comoros",label:"Comoros"},{value:"Cabo Verde",label:"Cabo Verde"},{value:"Costa Rica",label:"Costa Rica"},{value:"Cuba",label:"Cuba"},{value:"Curaçao",label:"Curaçao"},{value:"Christmas Island",label:"Christmas Island"},{value:"Cayman Islands",label:"Cayman Islands"},{value:"Cyprus",label:"Cyprus"},{value:"Czechia",label:"Czechia"},{value:"Germany",label:"Germany"},{value:"Djibouti",label:"Djibouti"},{value:"Dominica",label:"Dominica"},{value:"Denmark",label:"Denmark"},{value:"Dominican Republic",label:"Dominican Republic"},{value:"Algeria",label:"Algeria"},{value:"Ecuador",label:"Ecuador"},{value:"Egypt",label:"Egypt"},{value:"Eritrea",label:"Eritrea"},{value:"Western Sahara",label:"Western Sahara"},{value:"Spain",label:"Spain"},{value:"Estonia",label:"Estonia"},{value:"Ethiopia",label:"Ethiopia"},{value:"Finland",label:"Finland"},{value:"Fiji",label:"Fiji"},{value:"Falkland Islands (Malvinas)",label:"Falkland Islands (Malvinas)"},{value:"France",label:"France"},{value:"Faroe Islands",label:"Faroe Islands"},{value:"Micronesia, Federated States of",label:"Micronesia, Federated States of"},{value:"Gabon",label:"Gabon"},{value:"United Kingdom",label:"United Kingdom"},{value:"Georgia",label:"Georgia"},{value:"Guernsey",label:"Guernsey"},{value:"Ghana",label:"Ghana"},{value:"Gibraltar",label:"Gibraltar"},{value:"Guinea",label:"Guinea"},{value:"Guadeloupe",label:"Guadeloupe"},{value:"Gambia",label:"Gambia"},{value:"Guinea-Bissau",label:"Guinea-Bissau"},{value:"Equatorial Guinea",label:"Equatorial Guinea"},{value:"Greece",label:"Greece"},{value:"Grenada",label:"Grenada"},{value:"Greenland",label:"Greenland"},{value:"Guatemala",label:"Guatemala"},{value:"French Guiana",label:"French Guiana"},{value:"Guam",label:"Guam"},{value:"Guyana",label:"Guyana"},{value:"Hong Kong",label:"Hong Kong"},{value:"Heard Island and McDonald Islands",label:"Heard Island and McDonald Islands"},{value:"Honduras",label:"Honduras"},{value:"Croatia",label:"Croatia"},{value:"Haiti",label:"Haiti"},{value:"Hungary",label:"Hungary"},{value:"Indonesia",label:"Indonesia"},{value:"Isle of Man",label:"Isle of Man"},{value:"India",label:"India"},{value:"British Indian Ocean Territory",label:"British Indian Ocean Territory"},{value:"Ireland",label:"Ireland"},{value:"Iran, Islamic Republic of",label:"Iran, Islamic Republic of"},{value:"Iraq",label:"Iraq"},{value:"Iceland",label:"Iceland"},{value:"Israel",label:"Israel"},{value:"Italy",label:"Italy"},{value:"Jamaica",label:"Jamaica"},{value:"Jersey",label:"Jersey"},{value:"Jordan",label:"Jordan"},{value:"Japan",label:"Japan"},{value:"Kazakhstan",label:"Kazakhstan"},{value:"Kenya",label:"Kenya"},{value:"Kyrgyzstan",label:"Kyrgyzstan"},{value:"Cambodia",label:"Cambodia"},{value:"Kiribati",label:"Kiribati"},{value:"Saint Kitts and Nevis",label:"Saint Kitts and Nevis"},{value:"Korea, Republic of",label:"Korea, Republic of"},{value:"Kuwait",label:"Kuwait"},{value:"Lao People's Democratic Republic",label:"Lao People's Democratic Republic"},{value:"Lebanon",label:"Lebanon"},{value:"Liberia",label:"Liberia"},{value:"Libya",label:"Libya"},{value:"Saint Lucia",label:"Saint Lucia"},{value:"Liechtenstein",label:"Liechtenstein"},{value:"Sri Lanka",label:"Sri Lanka"},{value:"Lesotho",label:"Lesotho"},{value:"Lithuania",label:"Lithuania"},{value:"Luxembourg",label:"Luxembourg"},{value:"Latvia",label:"Latvia"},{value:"Macao",label:"Macao"},{value:"Saint Martin (French part)",label:"Saint Martin (French part)"},{value:"Morocco",label:"Morocco"},{value:"Monaco",label:"Monaco"},{value:"Moldova, Republic of",label:"Moldova, Republic of"},{value:"Madagascar",label:"Madagascar"},{value:"Maldives",label:"Maldives"},{value:"Mexico",label:"Mexico"},{value:"Marshall Islands",label:"Marshall Islands"},{value:"North Macedonia",label:"North Macedonia"},{value:"Mali",label:"Mali"},{value:"Malta",label:"Malta"},{value:"Myanmar",label:"Myanmar"},{value:"Montenegro",label:"Montenegro"},{value:"Mongolia",label:"Mongolia"},{value:"Northern Mariana Islands",label:"Northern Mariana Islands"},{value:"Mozambique",label:"Mozambique"},{value:"Mauritania",label:"Mauritania"},{value:"Montserrat",label:"Montserrat"},{value:"Martinique",label:"Martinique"},{value:"Mauritius",label:"Mauritius"},{value:"Malawi",label:"Malawi"},{value:"Malaysia",label:"Malaysia"},{value:"Mayotte",label:"Mayotte"},{value:"Namibia",label:"Namibia"},{value:"New Caledonia",label:"New Caledonia"},{value:"Niger",label:"Niger"},{value:"Norfolk Island",label:"Norfolk Island"},{value:"Nigeria",label:"Nigeria"},{value:"Nicaragua",label:"Nicaragua"},{value:"Niue",label:"Niue"},{value:"Netherlands",label:"Netherlands"},{value:"Norway",label:"Norway"},{value:"Nepal",label:"Nepal"},{value:"Nauru",label:"Nauru"},{value:"New Zealand",label:"New Zealand"},{value:"Oman",label:"Oman"},{value:"Pakistan",label:"Pakistan"},{value:"Panama",label:"Panama"},{value:"Pitcairn",label:"Pitcairn"},{value:"Peru",label:"Peru"},{value:"Philippines",label:"Philippines"},{value:"Palau",label:"Palau"},{value:"Papua New Guinea",label:"Papua New Guinea"},{value:"Poland",label:"Poland"},{value:"Puerto Rico",label:"Puerto Rico"},{value:"Korea, Democratic People's Republic of",label:"Korea, Democratic People's Republic of"},{value:"Portugal",label:"Portugal"},{value:"Paraguay",label:"Paraguay"},{value:"Palestine, State of",label:"Palestine, State of"},{value:"French Polynesia",label:"French Polynesia"},{value:"Qatar",label:"Qatar"},{value:"Réunion",label:"Réunion"},{value:"Romania",label:"Romania"},{value:"Russian Federation",label:"Russian Federation"},{value:"Rwanda",label:"Rwanda"},{value:"Saudi Arabia",label:"Saudi Arabia"},{value:"Sudan",label:"Sudan"},{value:"Senegal",label:"Senegal"},{value:"Singapore",label:"Singapore"},{value:"South Georgia and the South Sandwich Islands",label:"South Georgia and the South Sandwich Islands"},{value:"Saint Helena, Ascension and Tristan da Cunha",label:"Saint Helena, Ascension and Tristan da Cunha"},{value:"Svalbard and Jan Mayen",label:"Svalbard and Jan Mayen"},{value:"Solomon Islands",label:"Solomon Islands"},{value:"Sierra Leone",label:"Sierra Leone"},{value:"El Salvador",label:"El Salvador"},{value:"San Marino",label:"San Marino"},{value:"Somalia",label:"Somalia"},{value:"Saint Pierre and Miquelon",label:"Saint Pierre and Miquelon"},{value:"Serbia",label:"Serbia"},{value:"South Sudan",label:"South Sudan"},{value:"Sao Tome and Principe",label:"Sao Tome and Principe"},{value:"Suriname",label:"Suriname"},{value:"Slovakia",label:"Slovakia"},{value:"Slovenia",label:"Slovenia"},{value:"Sweden",label:"Sweden"},{value:"Eswatini",label:"Eswatini"},{value:"Sint Maarten (Dutch part)",label:"Sint Maarten (Dutch part)"},{value:"Seychelles",label:"Seychelles"},{value:"Syrian Arab Republic",label:"Syrian Arab Republic"},{value:"Turks and Caicos Islands",label:"Turks and Caicos Islands"},{value:"Chad",label:"Chad"},{value:"Togo",label:"Togo"},{value:"Thailand",label:"Thailand"},{value:"Tajikistan",label:"Tajikistan"},{value:"Tokelau",label:"Tokelau"},{value:"Turkmenistan",label:"Turkmenistan"},{value:"Timor-Leste",label:"Timor-Leste"},{value:"Tonga",label:"Tonga"},{value:"Trinidad and Tobago",label:"Trinidad and Tobago"},{value:"Tunisia",label:"Tunisia"},{value:"Turkey",label:"Turkey"},{value:"Tuvalu",label:"Tuvalu"},{value:"Taiwan, Province of China",label:"Taiwan, Province of China"},{value:"Tanzania, United Republic of",label:"Tanzania, United Republic of"},{value:"Uganda",label:"Uganda"},{value:"Ukraine",label:"Ukraine"},{value:"United States Minor Outlying Islands",label:"United States Minor Outlying Islands"},{value:"Uruguay",label:"Uruguay"},{value:"United States",label:"United States"},{value:"Uzbekistan",label:"Uzbekistan"},{value:"Holy See (Vatican City State)",label:"Holy See (Vatican City State)"},{value:"Saint Vincent and the Grenadines",label:"Saint Vincent and the Grenadines"},{value:"Venezuela, Bolivarian Republic of",label:"Venezuela, Bolivarian Republic of"},{value:"Virgin Islands, British",label:"Virgin Islands, British"},{value:"Virgin Islands, U.S.",label:"Virgin Islands, U.S."},{value:"Viet Nam",label:"Viet Nam"},{value:"Vanuatu",label:"Vanuatu"},{value:"Wallis and Futuna",label:"Wallis and Futuna"},{value:"Samoa",label:"Samoa"},{value:"Yemen",label:"Yemen"},{value:"South Africa",label:"South Africa"},{value:"Zambia",label:"Zambia"},{value:"Zimbabwe",label:"Zimbabwe"}],[T,b]=g.useState([]);g.useEffect(()=>{(async()=>{var c;try{const v=(c=(await ne()).data)==null?void 0:c.users.map(i=>({value:i._id,label:`${i.firstName} ${i.lastName}`,role:i.role}));b(v)}catch(a){console.error("Failed to fetch users",a)}})()},[]);const x=(l,c)=>{const v=[...l.customExpenses||[],{name:"",amount:0}];c("customExpenses",v)},d=(l,c,a)=>{const i=[...c.customExpenses||[]];i.splice(l,1),a("customExpenses",i)},r=(l,c,a,v,i)=>{const E=[...v.customExpenses||[]];E[l]={...E[l],[c]:c==="amount"?Number(a)||0:a},i("customExpenses",E)};return e.jsx(Q,{innerRef:p,initialValues:B,validationSchema:P,onSubmit:async(l,{setSubmitting:c})=>{try{await U(l,c)}catch(a){c(!1),console.error("Form submission error:",a)}},enableReinitialize:!0,children:({values:l,touched:c,errors:a,isSubmitting:v,setFieldValue:i,handleBlur:s})=>{var E;return g.useEffect(()=>{const n=Number(l.basicSalary)||0,m=Number(l.allowance)||0,f=n+m,C=f*24,R=["visaExpenses","twoYearUniform","shoes","twoYearAccommodation","sewaBills","dewaBills","insurance","transport","water","thirdPartyLiabilities","fairmontCertificate","leaveSalary","ticket","gratuity"].reduce((S,O)=>S+(Number(l[O])||0),0),Y=(l.customExpenses||[]).reduce((S,O)=>S+(Number(O.amount)||0),0),w=C+R+Y,L=w/2,A=w/24,q=A/30;i("totalSalary",f),i("twoYearSalary",C),i("totalExpensesPerPerson",w.toFixed(2)),i("perYearExpenses",L.toFixed(2)),i("perMonthExpenses",A.toFixed(2)),i("perDayExpenses",q.toFixed(2))},[l.basicSalary,l.allowance,l.visaExpenses,l.twoYearUniform,l.shoes,l.twoYearAccommodation,l.sewaBills,l.dewaBills,l.insurance,l.transport,l.water,l.thirdPartyLiabilities,l.fairmontCertificate,l.leaveSalary,l.ticket,l.gratuity,l.customExpenses,i]),e.jsx(_,{children:e.jsxs(Z,{children:[e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsxs(le,{divider:!0,className:"mb-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h5",{className:"text-lg font-semibold mb-4 border-b pb-2",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(t,{label:"EMPLOYEE",invalid:!!a.employee,errorMessage:a.employee,children:e.jsx(H,{name:"employee",placeholder:"Select employee",value:T.find(n=>n.value===l.employee),options:T,onChange:n=>{i("employee",n==null?void 0:n.value),i("designation",n==null?void 0:n.role)},onBlur:s})}),e.jsx(t,{label:"DESIGNATION",invalid:!!a.designation,errorMessage:a.designation,children:e.jsx(o,{name:"designation",value:l.designation,readOnly:!0,onBlur:s})}),e.jsx(t,{label:"COUNTRY",invalid:!!a.country,errorMessage:a.country,children:e.jsx(H,{name:"country",value:I.find(n=>n.value===l.country),options:I,onChange:n=>i("country",n==null?void 0:n.value),onBlur:s})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h5",{className:"text-lg font-semibold mb-4 border-b pb-2",children:"Salary Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(t,{label:"BASIC SALARY",invalid:!!a.basicSalary,errorMessage:a.basicSalary,children:e.jsx(o,{type:"number",name:"basicSalary",value:l.basicSalary,onChange:n=>{const m=Number(n.target.value)||0;i("basicSalary",m)},onBlur:s})}),e.jsx(t,{label:"ALLOWANCE",invalid:!!a.allowance,errorMessage:a.allowance,children:e.jsx(o,{type:"number",name:"allowance",value:l.allowance,onChange:n=>{const m=Number(n.target.value)||0;i("allowance",m)},onBlur:s})}),e.jsx(t,{label:"TOTAL SALARY",invalid:!!a.totalSalary,errorMessage:a.totalSalary,children:e.jsx(o,{type:"number",name:"totalSalary",value:l.totalSalary,disabled:!0,onBlur:s})}),e.jsx(t,{label:"2 YEARS SALARY",invalid:!!a.twoYearSalary,errorMessage:a.twoYearSalary,children:e.jsx(o,{type:"number",name:"twoYearSalary",value:l.twoYearSalary,disabled:!0,onBlur:s})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h5",{className:"text-lg font-semibold mb-4 border-b pb-2",children:"Expenses Breakdown"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(t,{label:"PER YEAR EXPENSES",invalid:!!a.perYearExpenses,errorMessage:a.perYearExpenses,children:e.jsx(o,{type:"number",name:"perYearExpenses",value:l.perYearExpenses,disabled:!0,onBlur:s})}),e.jsx(t,{label:"PER MONTH EXPENSES",invalid:!!a.perMonthExpenses,errorMessage:a.perMonthExpenses,children:e.jsx(o,{type:"number",name:"perMonthExpenses",value:l.perMonthExpenses,disabled:!0,onBlur:s})}),e.jsx(t,{label:"PER DAY EXPENSES",invalid:!!a.perDayExpenses,errorMessage:a.perDayExpenses,children:e.jsx(o,{type:"number",name:"perDayExpenses",value:l.perDayExpenses,disabled:!0,onBlur:s})}),e.jsx(t,{label:"TOTAL EXPENSES PER PERSON (2 YEAR)",invalid:!!a.totalExpensesPerPerson,errorMessage:a.totalExpensesPerPerson,children:e.jsx(o,{type:"number",name:"totalExpensesPerPerson",value:l.totalExpensesPerPerson,disabled:!0,onBlur:s})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h5",{className:"text-lg font-semibold mb-4 border-b pb-2",children:"Detailed Expenses"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(t,{label:"VISA EXPENSES",invalid:!!a.visaExpenses,errorMessage:a.visaExpenses,children:e.jsx(o,{type:"number",name:"visaExpenses",value:l.visaExpenses,onChange:n=>i("visaExpenses",Number(n.target.value)||0),onBlur:s})}),e.jsx(t,{label:"2 YEAR UNIFORM (3 SET PER 6 MONTH)",invalid:!!a.twoYearUniform,errorMessage:a.twoYearUniform,children:e.jsx(o,{type:"number",name:"twoYearUniform",value:l.twoYearUniform,onChange:n=>i("twoYearUniform",Number(n.target.value)||0),onBlur:s})}),e.jsx(t,{label:"SHOES",invalid:!!a.shoes,errorMessage:a.shoes,children:e.jsx(o,{type:"number",name:"shoes",value:l.shoes,onChange:n=>i("shoes",Number(n.target.value)||0),onBlur:s})}),e.jsx(t,{label:"2 YEAR ACCOMMODATION + OFFICE RENT",invalid:!!a.twoYearAccommodation,errorMessage:a.twoYearAccommodation,children:e.jsx(o,{type:"number",name:"twoYearAccommodation",value:l.twoYearAccommodation,onChange:n=>i("twoYearAccommodation",Number(n.target.value)||0),onBlur:s})}),e.jsx(t,{label:"SEWA BILLS 2 YEAR",invalid:!!a.sewaBills,errorMessage:a.sewaBills,children:e.jsx(o,{type:"number",name:"sewaBills",value:l.sewaBills,onChange:n=>i("sewaBills",Number(n.target.value)||0),onBlur:s})}),e.jsx(t,{label:"DEWA BILLS 2 YEAR",invalid:!!a.dewaBills,errorMessage:a.dewaBills,children:e.jsx(o,{type:"number",name:"dewaBills",value:l.dewaBills,onChange:n=>i("dewaBills",Number(n.target.value)||0),onBlur:s})}),e.jsx(t,{label:"WORKMAN COMPENSATION INSURANCE",invalid:!!a.insurance,errorMessage:a.insurance,children:e.jsx(o,{type:"number",name:"insurance",value:l.insurance,onChange:n=>i("insurance",Number(n.target.value)||0),onBlur:s})}),e.jsx(t,{label:"TRANSPORT",invalid:!!a.transport,errorMessage:a.transport,children:e.jsx(o,{type:"number",name:"transport",value:l.transport,onChange:n=>i("transport",Number(n.target.value)||0),onBlur:s})}),e.jsx(t,{label:"WATER",invalid:!!a.water,errorMessage:a.water,children:e.jsx(o,{type:"number",name:"water",value:l.water,onChange:n=>i("water",Number(n.target.value)||0),onBlur:s})}),e.jsx(t,{label:"THIRD PARTY LIABILITIES",invalid:!!a.thirdPartyLiabilities,errorMessage:a.thirdPartyLiabilities,children:e.jsx(o,{type:"number",name:"thirdPartyLiabilities",value:l.thirdPartyLiabilities,onChange:n=>i("thirdPartyLiabilities",Number(n.target.value)||0),onBlur:s})}),e.jsx(t,{label:"FAIRMONT CERTIFICATE",invalid:!!a.fairmontCertificate,errorMessage:a.fairmontCertificate,children:e.jsx(o,{type:"number",name:"fairmontCertificate",value:l.fairmontCertificate,onChange:n=>i("fairmontCertificate",Number(n.target.value)||0),onBlur:s})}),e.jsx(t,{label:"LEAVE SALARY",invalid:!!a.leaveSalary,errorMessage:a.leaveSalary,children:e.jsx(o,{type:"number",name:"leaveSalary",value:l.leaveSalary,onChange:n=>i("leaveSalary",Number(n.target.value)||0),onBlur:s})}),e.jsx(t,{label:"TICKET (UP AND DOWN)",invalid:!!a.ticket,errorMessage:a.ticket,children:e.jsx(o,{type:"number",name:"ticket",value:l.ticket,onChange:n=>i("ticket",Number(n.target.value)||0),onBlur:s})}),e.jsx(t,{label:"GRATUITY",invalid:!!a.gratuity,errorMessage:a.gratuity,children:e.jsx(o,{type:"number",name:"gratuity",value:l.gratuity,onChange:n=>i("gratuity",Number(n.target.value)||0),onBlur:s})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[e.jsx("h5",{className:"text-lg font-semibold",children:((E=l==null?void 0:l.customExpenses)==null?void 0:E.length)>0?"Additional Custom Expenses":""}),e.jsx(M,{size:"sm",variant:"plain",icon:e.jsx(V,{}),onClick:()=>x(l,i),children:"Add Custom Expense"})]}),(l.customExpenses||[]).map((n,m)=>{var f,C,R,Y,w,L,A,q;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4 items-end",children:[e.jsx(t,{label:"Expense Name",invalid:!!((C=(f=a.customExpenses)==null?void 0:f[m])!=null&&C.name),errorMessage:(Y=(R=a.customExpenses)==null?void 0:R[m])==null?void 0:Y.name,children:e.jsx(o,{value:n.name,onChange:S=>r(m,"name",S.target.value,l,i)})}),e.jsx(t,{label:"Amount",invalid:!!((L=(w=a.customExpenses)==null?void 0:w[m])!=null&&L.amount),errorMessage:(q=(A=a.customExpenses)==null?void 0:A[m])==null?void 0:q.amount,children:e.jsx(o,{type:"number",value:n.amount,onChange:S=>r(m,"amount",S.target.value,l,i)})}),e.jsx(M,{type:"button",variant:"plain",color:"red",icon:e.jsx(K,{}),onClick:()=>d(m,l,i),children:"Remove"})]},m)})]})]})}),e.jsxs(X,{className:"-mx-8 px-8 flex items-center justify-between py-4",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[e.jsx("div",{children:j==="edit"&&N&&e.jsx(M,{size:"sm",variant:"plain",color:"red",icon:e.jsx(K,{}),type:"button",onClick:()=>N(()=>{}),children:"Delete"})}),e.jsxs("div",{className:"md:flex items-center",children:[e.jsx(M,{size:"sm",className:"ltr:mr-3 rtl:ml-3",type:"button",onClick:()=>h==null?void 0:h(),children:"Discard"}),e.jsx(M,{size:"sm",variant:"solid",loading:v,icon:e.jsx(ee,{}),type:"submit",children:"Save"})]})]})]})})}})});J.displayName="LabourExpensesForm";const z={employee:"",designation:"",country:"",basicSalary:0,allowance:0,total:0,twoYearSalary:0,visaExpenses:0,twoYearUniform:0,shoes:0,twoYearAccommodation:0,sewaBills:0,dewaBills:0,insurance:0,transport:0,water:0,thirdPartyLiabilities:0,fairmontCertificate:0,leaveSalary:0,ticket:0,gratuity:0},ua=()=>{const y=W(),{id:p}=$(),[j,B]=g.useState(z),[U,h]=g.useState(!!p),[N,P]=g.useState(null);g.useEffect(()=>{if(!p){B(z),h(!1);return}(async()=>{var x;try{h(!0);const d=await ie(p);if(!(d!=null&&d.data))throw new Error("Invalid labour expenses data received");const r=Array.isArray(d.data.expenses)?d.data.expenses[0]:d.data,l={...r,employee:((x=r.employee)==null?void 0:x._id)||"",designation:r.designation||"",country:r.country||"",basicSalary:Number(r.basicSalary)||0,allowance:Number(r.allowance)||0,total:Number(r.total)||0,twoYearSalary:Number(r.twoYearSalary)||0,visaExpenses:Number(r.visaExpenses)||0,twoYearUniform:Number(r.twoYearUniform)||0,shoes:Number(r.shoes)||0,twoYearAccommodation:Number(r.twoYearAccommodation)||0,sewaBills:Number(r.sewaBills)||0,dewaBills:Number(r.dewaBills)||0,insurance:Number(r.insurance)||0,transport:Number(r.transport)||0,water:Number(r.water)||0,thirdPartyLiabilities:Number(r.thirdPartyLiabilities)||0,fairmontCertificate:Number(r.fairmontCertificate)||0,leaveSalary:Number(r.leaveSalary)||0,ticket:Number(r.ticket)||0,gratuity:Number(r.gratuity)||0};B(l),P(null)}catch(d){console.error("Error fetching labour expenses report:",d),P(d.message||"Failed to load report data"),D.push(e.jsx(k,{title:"Failed to fetch labour expenses report data",type:"danger",duration:2500,children:d.message||"Something went wrong"}),{placement:"top-center"}),setTimeout(()=>y("/app/labour-expenses-view"),2500)}finally{h(!1)}})()},[p,y]);const I=async(b,x)=>{var d,r,l,c;try{x(!0);const a={reportType:"labour-expenses",...b,basicSalary:Number(b.basicSalary),allowance:Number(b.allowance),total:Number(b.total),twoYearSalary:Number(b.twoYearSalary),visaExpenses:Number(b.visaExpenses),twoYearUniform:Number(b.twoYearUniform),shoes:Number(b.shoes),twoYearAccommodation:Number(b.twoYearAccommodation),sewaBills:Number(b.sewaBills),dewaBills:Number(b.dewaBills),insurance:Number(b.insurance),transport:Number(b.transport),water:Number(b.water),thirdPartyLiabilities:Number(b.thirdPartyLiabilities),fairmontCertificate:Number(b.fairmontCertificate),leaveSalary:Number(b.leaveSalary),ticket:Number(b.ticket),gratuity:Number(b.gratuity)},v=p?await re(p,a):await te(a);if([200,201].includes(v.status))D.push(e.jsxs(k,{title:`Successfully ${p?"updated":"added"} labour expenses `,type:"success",duration:2500,children:["Labour expenses ",p?"updated":"added"," successfully"]}),{placement:"top-center"}),y("/app/labour-expenses-report-view");else throw new Error(((r=(d=v==null?void 0:v.response)==null?void 0:d.data)==null?void 0:r.message)||"Unexpected status code")}catch(a){console.error("Error during form submission:",a),D.push(e.jsx(k,{title:`Error ${p?"updating":"adding"} labour expenses report`,type:"danger",duration:2500,children:((c=(l=a==null?void 0:a.response)==null?void 0:l.data)==null?void 0:c.message)||a.message}),{placement:"top-center"})}finally{x(!1)}},T=()=>{JSON.stringify(j)!==JSON.stringify(z)?window.confirm("Are you sure you want to discard changes?")&&y("/app/labour-expenses-view"):y("/app/labour-expenses-view")};return U?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):N?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(k,{title:"Error loading labour expenses report",type:"danger",children:N})}):e.jsx(J,{type:p?"edit":"new",initialData:j,onFormSubmit:I,onDiscard:T})};export{ua as default};
