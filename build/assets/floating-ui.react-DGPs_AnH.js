import{r as u,at as Be,au as Ke,j as z}from"./index-CfFwh--H.js";import{i as st,b as te,o as ut,f as at,s as ct,c as lt,d as F,g as ft,e as ce,h as dt,j as le,k as vt,l as mt}from"./floating-ui.dom-B_iSk-nO.js";const bn=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&typeof n=="object"&&(n.current=e)})};/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var gt=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Re=gt.join(","),je=typeof Element>"u",Q=je?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,se=!je&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},ue=function t(e,n){var r;n===void 0&&(n=!0);var o=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=o===""||o==="true",i=s||n&&e&&t(e.parentNode);return i},pt=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},bt=function(e,n,r){if(ue(e))return[];var o=Array.prototype.slice.apply(e.querySelectorAll(Re));return n&&Q.call(e,Re)&&o.unshift(e),o=o.filter(r),o},Rt=function t(e,n,r){for(var o=[],s=Array.from(e);s.length;){var i=s.shift();if(!ue(i,!1))if(i.tagName==="SLOT"){var a=i.assignedElements(),l=a.length?a:i.children,f=t(l,!0,r);r.flatten?o.push.apply(o,f):o.push({scopeParent:i,candidates:f})}else{var g=Q.call(i,Re);g&&r.filter(i)&&(n||!e.includes(i))&&o.push(i);var b=i.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(i),p=!ue(b,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(i));if(b&&p){var d=t(b===!0?i.children:b.children,!0,r);r.flatten?o.push.apply(o,d):o.push({scopeParent:i,candidates:d})}else s.unshift.apply(s,i.children)}}return o},We=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Ue=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||pt(e))&&!We(e)?0:e.tabIndex},ht=function(e,n){var r=Ue(e);return r<0&&n&&!We(e)?0:r},Et=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},Ye=function(e){return e.tagName==="INPUT"},yt=function(e){return Ye(e)&&e.type==="hidden"},wt=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},xt=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},Ct=function(e){if(!e.name)return!0;var n=e.form||se(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(e.name));else try{o=r(e.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var s=xt(o,e.form);return!s||s===e},St=function(e){return Ye(e)&&e.type==="radio"},Tt=function(e){return St(e)&&!Ct(e)},Mt=function(e){var n,r=e&&se(e),o=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var i,a,l;for(s=!!((i=o)!==null&&i!==void 0&&(a=i.ownerDocument)!==null&&a!==void 0&&a.contains(o)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&o;){var f,g,b;r=se(o),o=(f=r)===null||f===void 0?void 0:f.host,s=!!((g=o)!==null&&g!==void 0&&(b=g.ownerDocument)!==null&&b!==void 0&&b.contains(o))}}return s},Ce=function(e){var n=e.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},It=function(e,n){var r=n.displayCheck,o=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Q.call(e,"details>summary:first-of-type"),i=s?e.parentElement:e;if(Q.call(i,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof o=="function"){for(var a=e;e;){var l=e.parentElement,f=se(e);if(l&&!l.shadowRoot&&o(l)===!0)return Ce(e);e.assignedSlot?e=e.assignedSlot:!l&&f!==e.ownerDocument?e=f.host:e=l}e=a}if(Mt(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Ce(e);return!1},Pt=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return Q.call(n,"fieldset[disabled] *")?!0:!o.contains(e)}return!0}n=n.parentElement}return!1},kt=function(e,n){return!(n.disabled||ue(n)||yt(n)||It(n,e)||wt(n)||Pt(n))},Se=function(e,n){return!(Tt(n)||Ue(n)<0||!kt(e,n))},Lt=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},Dt=function t(e){var n=[],r=[];return e.forEach(function(o,s){var i=!!o.scopeParent,a=i?o.scopeParent:o,l=ht(a,i),f=i?t(o.candidates):a;l===0?i?n.push.apply(n,f):n.push(a):r.push({documentOrder:s,tabIndex:l,item:o,isScope:i,content:f})}),r.sort(Et).reduce(function(o,s){return s.isScope?o.push.apply(o,s.content):o.push(s.content),o},[]).concat(n)},He=function(e,n){n=n||{};var r;return n.getShadowRoot?r=Rt([e],n.includeContainer,{filter:Se.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:Lt}):r=bt(e,n.includeContainer,Se.bind(null,n)),Dt(r)};function At(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function Ot(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function Ve(){return/apple/i.test(navigator.vendor)}function Ft(){return At().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Nt(){return Ot().includes("jsdom/")}const Te="data-floating-ui-focusable",_t="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function he(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function G(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&st(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function X(t){return"composedPath"in t?t.composedPath()[0]:t.target}function fe(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function $t(t){return t.matches("html,body")}function H(t){return(t==null?void 0:t.ownerDocument)||document}function qe(t){return te(t)&&t.matches(_t)}function Bt(t){if(!t||Nt())return!0;try{return t.matches(":focus-visible")}catch{return!0}}function Kt(t){return t?t.hasAttribute(Te)?t:t.querySelector("["+Te+"]")||t:null}function oe(t,e,n){return n===void 0&&(n=!0),t.filter(o=>{var s;return o.parentId===e&&(!n||((s=o.context)==null?void 0:s.open))}).flatMap(o=>[o,...oe(t,o.id,n)])}function jt(t){return"nativeEvent"in t}function ee(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}var Wt=typeof document<"u",Ut=function(){},V=Wt?u.useLayoutEffect:Ut;const Yt={...Be};function re(t){const e=u.useRef(t);return V(()=>{e.current=t}),e}const Ht=Yt.useInsertionEffect,Vt=Ht||(t=>t());function Y(t){const e=u.useRef(()=>{});return Vt(()=>{e.current=t}),u.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}const Xe=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function Ge(t,e){const n=He(t,Xe()),r=n.length;if(r===0)return;const o=he(H(t)),s=n.indexOf(o),i=s===-1?e===1?0:r-1:s+e;return n[i]}function qt(t){return Ge(H(t).body,1)||t}function Xt(t){return Ge(H(t).body,-1)||t}function de(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!G(n,r)}function Gt(t){He(t,Xe()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function Me(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}var Zt=typeof document<"u",Jt=function(){},ie=Zt?u.useLayoutEffect:Jt;function ae(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!ae(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=n;r--!==0;){const s=o[r];if(!(s==="_owner"&&t.$$typeof)&&!ae(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function Ze(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Ie(t,e){const n=Ze(t);return Math.round(e*n)/n}function ve(t){const e=u.useRef(t);return ie(()=>{e.current=t}),e}function zt(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:s,floating:i}={},transform:a=!0,whileElementsMounted:l,open:f}=t,[g,b]=u.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,d]=u.useState(r);ae(p,r)||d(r);const[E,c]=u.useState(null),[y,T]=u.useState(null),w=u.useCallback(v=>{v!==D.current&&(D.current=v,c(v))},[]),C=u.useCallback(v=>{v!==N.current&&(N.current=v,T(v))},[]),M=s||E,P=i||y,D=u.useRef(null),N=u.useRef(null),U=u.useRef(g),_=l!=null,$=ve(l),B=ve(o),W=ve(f),A=u.useCallback(()=>{if(!D.current||!N.current)return;const v={placement:e,strategy:n,middleware:p};B.current&&(v.platform=B.current),lt(D.current,N.current,v).then(m=>{const S={...m,isPositioned:W.current!==!1};O.current&&!ae(U.current,S)&&(U.current=S,Ke.flushSync(()=>{b(S)}))})},[p,e,n,B,W]);ie(()=>{f===!1&&U.current.isPositioned&&(U.current.isPositioned=!1,b(v=>({...v,isPositioned:!1})))},[f]);const O=u.useRef(!1);ie(()=>(O.current=!0,()=>{O.current=!1}),[]),ie(()=>{if(M&&(D.current=M),P&&(N.current=P),M&&P){if($.current)return $.current(M,P,A);A()}},[M,P,A,$,_]);const h=u.useMemo(()=>({reference:D,floating:N,setReference:w,setFloating:C}),[w,C]),I=u.useMemo(()=>({reference:M,floating:P}),[M,P]),R=u.useMemo(()=>{const v={position:n,left:0,top:0};if(!I.floating)return v;const m=Ie(I.floating,g.x),S=Ie(I.floating,g.y);return a?{...v,transform:"translate("+m+"px, "+S+"px)",...Ze(I.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:m,top:S}},[n,a,I.floating,g.x,g.y]);return u.useMemo(()=>({...g,update:A,refs:h,elements:I,floatingStyles:R}),[g,A,h,I,R])}const Rn=(t,e)=>({...ut(t),options:[t,e]}),hn=(t,e)=>({...ct(t),options:[t,e]}),En=(t,e)=>({...at(t),options:[t,e]}),Qt="data-floating-ui-focusable",Pe="active",ke="selected",en={...Be};let Le=!1,tn=0;const De=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+tn++;function nn(){const[t,e]=u.useState(()=>Le?De():void 0);return V(()=>{t==null&&e(De())},[]),u.useEffect(()=>{Le=!0},[]),t}const rn=en.useId,Ee=rn||nn;function on(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(o=>o(n))},on(e,n){t.has(e)||t.set(e,new Set),t.get(e).add(n)},off(e,n){var r;(r=t.get(e))==null||r.delete(n)}}}const sn=u.createContext(null),un=u.createContext(null),ye=()=>{var t;return((t=u.useContext(sn))==null?void 0:t.id)||null},we=()=>u.useContext(un);function ne(t){return"data-floating-ui-"+t}function j(t){t.current!==-1&&(clearTimeout(t.current),t.current=-1)}const Ae=ne("safe-polygon");function me(t,e,n){if(n&&!ee(n))return 0;if(typeof t=="number")return t;if(typeof t=="function"){const r=t();return typeof r=="number"?r:r==null?void 0:r[e]}return t==null?void 0:t[e]}function ge(t){return typeof t=="function"?t():t}function yn(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:o,events:s,elements:i}=t,{enabled:a=!0,delay:l=0,handleClose:f=null,mouseOnly:g=!1,restMs:b=0,move:p=!0}=e,d=we(),E=ye(),c=re(f),y=re(l),T=re(n),w=re(b),C=u.useRef(),M=u.useRef(-1),P=u.useRef(),D=u.useRef(-1),N=u.useRef(!0),U=u.useRef(!1),_=u.useRef(()=>{}),$=u.useRef(!1),B=Y(()=>{var R;const v=(R=o.current.openEvent)==null?void 0:R.type;return(v==null?void 0:v.includes("mouse"))&&v!=="mousedown"});u.useEffect(()=>{if(!a)return;function R(v){let{open:m}=v;m||(j(M),j(D),N.current=!0,$.current=!1)}return s.on("openchange",R),()=>{s.off("openchange",R)}},[a,s]),u.useEffect(()=>{if(!a||!c.current||!n)return;function R(m){B()&&r(!1,m,"hover")}const v=H(i.floating).documentElement;return v.addEventListener("mouseleave",R),()=>{v.removeEventListener("mouseleave",R)}},[i.floating,n,r,a,c,B]);const W=u.useCallback(function(R,v,m){v===void 0&&(v=!0),m===void 0&&(m="hover");const S=me(y.current,"close",C.current);S&&!P.current?(j(M),M.current=window.setTimeout(()=>r(!1,R,m),S)):v&&(j(M),r(!1,R,m))},[y,r]),A=Y(()=>{_.current(),P.current=void 0}),O=Y(()=>{if(U.current){const R=H(i.floating).body;R.style.pointerEvents="",R.removeAttribute(Ae),U.current=!1}}),h=Y(()=>o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1);u.useEffect(()=>{if(!a)return;function R(x){if(j(M),N.current=!1,g&&!ee(C.current)||ge(w.current)>0&&!me(y.current,"open"))return;const L=me(y.current,"open",C.current);L?M.current=window.setTimeout(()=>{T.current||r(!0,x,"hover")},L):n||r(!0,x,"hover")}function v(x){if(h()){O();return}_.current();const L=H(i.floating);if(j(D),$.current=!1,c.current&&o.current.floatingContext){n||j(M),P.current=c.current({...o.current.floatingContext,tree:d,x:x.clientX,y:x.clientY,onClose(){O(),A(),h()||W(x,!0,"safe-polygon")}});const Z=P.current;L.addEventListener("mousemove",Z),_.current=()=>{L.removeEventListener("mousemove",Z)};return}(C.current==="touch"?!G(i.floating,x.relatedTarget):!0)&&W(x)}function m(x){h()||o.current.floatingContext&&(c.current==null||c.current({...o.current.floatingContext,tree:d,x:x.clientX,y:x.clientY,onClose(){O(),A(),h()||W(x)}})(x))}function S(){j(M)}function k(x){h()||W(x,!1)}if(F(i.domReference)){const x=i.domReference,L=i.floating;return n&&x.addEventListener("mouseleave",m),p&&x.addEventListener("mousemove",R,{once:!0}),x.addEventListener("mouseenter",R),x.addEventListener("mouseleave",v),L&&(L.addEventListener("mouseleave",m),L.addEventListener("mouseenter",S),L.addEventListener("mouseleave",k)),()=>{n&&x.removeEventListener("mouseleave",m),p&&x.removeEventListener("mousemove",R),x.removeEventListener("mouseenter",R),x.removeEventListener("mouseleave",v),L&&(L.removeEventListener("mouseleave",m),L.removeEventListener("mouseenter",S),L.removeEventListener("mouseleave",k))}}},[i,a,t,g,p,W,A,O,r,n,T,d,y,c,o,h,w]),V(()=>{var R;if(a&&n&&(R=c.current)!=null&&(R=R.__options)!=null&&R.blockPointerEvents&&B()){U.current=!0;const m=i.floating;if(F(i.domReference)&&m){var v;const S=H(i.floating).body;S.setAttribute(Ae,"");const k=i.domReference,x=d==null||(v=d.nodesRef.current.find(L=>L.id===E))==null||(v=v.context)==null?void 0:v.elements.floating;return x&&(x.style.pointerEvents=""),S.style.pointerEvents="none",k.style.pointerEvents="auto",m.style.pointerEvents="auto",()=>{S.style.pointerEvents="",k.style.pointerEvents="",m.style.pointerEvents=""}}}},[a,n,E,i,d,c,B]),V(()=>{n||(C.current=void 0,$.current=!1,A(),O())},[n,A,O]),u.useEffect(()=>()=>{A(),j(M),j(D),O()},[a,i.domReference,A,O]);const I=u.useMemo(()=>{function R(v){C.current=v.pointerType}return{onPointerDown:R,onPointerEnter:R,onMouseMove(v){const{nativeEvent:m}=v;function S(){!N.current&&!T.current&&r(!0,m,"hover")}g&&!ee(C.current)||n||ge(w.current)===0||$.current&&v.movementX**2+v.movementY**2<2||(j(D),C.current==="touch"?S():($.current=!0,D.current=window.setTimeout(S,ge(w.current))))}}},[g,r,n,T,w]);return u.useMemo(()=>a?{reference:I}:{},[a,I])}const Je={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},Oe=u.forwardRef(function(e,n){const[r,o]=u.useState();V(()=>{Ve()&&o("button")},[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[ne("focus-guard")]:"",style:Je};return z.jsx("span",{...e,...s})}),ze=u.createContext(null),Fe=ne("portal");function an(t){t===void 0&&(t={});const{id:e,root:n}=t,r=Ee(),o=cn(),[s,i]=u.useState(null),a=u.useRef(null);return V(()=>()=>{s==null||s.remove(),queueMicrotask(()=>{a.current=null})},[s]),V(()=>{if(!r||a.current)return;const l=e?document.getElementById(e):null;if(!l)return;const f=document.createElement("div");f.id=r,f.setAttribute(Fe,""),l.appendChild(f),a.current=f,i(f)},[e,r]),V(()=>{if(n===null||!r||a.current)return;let l=n||(o==null?void 0:o.portalNode);l&&!F(l)&&(l=l.current),l=l||document.body;let f=null;e&&(f=document.createElement("div"),f.id=e,l.appendChild(f));const g=document.createElement("div");g.id=r,g.setAttribute(Fe,""),l=f||l,l.appendChild(g),a.current=g,i(g)},[e,n,r,o]),s}function wn(t){const{children:e,id:n,root:r,preserveTabOrder:o=!0}=t,s=an({id:n,root:r}),[i,a]=u.useState(null),l=u.useRef(null),f=u.useRef(null),g=u.useRef(null),b=u.useRef(null),p=i==null?void 0:i.modal,d=i==null?void 0:i.open,E=!!i&&!i.modal&&i.open&&o&&!!(r||s);return u.useEffect(()=>{if(!s||!o||p)return;function c(y){s&&de(y)&&(y.type==="focusin"?Me:Gt)(s)}return s.addEventListener("focusin",c,!0),s.addEventListener("focusout",c,!0),()=>{s.removeEventListener("focusin",c,!0),s.removeEventListener("focusout",c,!0)}},[s,o,p]),u.useEffect(()=>{s&&(d||Me(s))},[d,s]),z.jsxs(ze.Provider,{value:u.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:l,afterOutsideRef:f,beforeInsideRef:g,afterInsideRef:b,portalNode:s,setFocusManagerState:a}),[o,s]),children:[E&&s&&z.jsx(Oe,{"data-type":"outside",ref:l,onFocus:c=>{if(de(c,s)){var y;(y=g.current)==null||y.focus()}else{const T=i?i.domReference:null,w=Xt(T);w==null||w.focus()}}}),E&&s&&z.jsx("span",{"aria-owns":s.id,style:Je}),s&&Ke.createPortal(e,s),E&&s&&z.jsx(Oe,{"data-type":"outside",ref:f,onFocus:c=>{if(de(c,s)){var y;(y=b.current)==null||y.focus()}else{const T=i?i.domReference:null,w=qt(T);w==null||w.focus(),i!=null&&i.closeOnFocusOut&&(i==null||i.onOpenChange(!1,c.nativeEvent,"focus-out"))}}})]})}const cn=()=>u.useContext(ze);function Ne(t){return te(t.target)&&t.target.tagName==="BUTTON"}function ln(t){return te(t.target)&&t.target.tagName==="A"}function _e(t){return qe(t)}function xn(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:o,elements:{domReference:s}}=t,{enabled:i=!0,event:a="click",toggle:l=!0,ignoreMouse:f=!1,keyboardHandlers:g=!0,stickIfOpen:b=!0}=e,p=u.useRef(),d=u.useRef(!1),E=u.useMemo(()=>({onPointerDown(c){p.current=c.pointerType},onMouseDown(c){const y=p.current;c.button===0&&a!=="click"&&(ee(y,!0)&&f||(n&&l&&(!(o.current.openEvent&&b)||o.current.openEvent.type==="mousedown")?r(!1,c.nativeEvent,"click"):(c.preventDefault(),r(!0,c.nativeEvent,"click"))))},onClick(c){const y=p.current;if(a==="mousedown"&&p.current){p.current=void 0;return}ee(y,!0)&&f||(n&&l&&(!(o.current.openEvent&&b)||o.current.openEvent.type==="click")?r(!1,c.nativeEvent,"click"):r(!0,c.nativeEvent,"click"))},onKeyDown(c){p.current=void 0,!(c.defaultPrevented||!g||Ne(c))&&(c.key===" "&&!_e(s)&&(c.preventDefault(),d.current=!0),!ln(c)&&c.key==="Enter"&&r(!(n&&l),c.nativeEvent,"click"))},onKeyUp(c){c.defaultPrevented||!g||Ne(c)||_e(s)||c.key===" "&&d.current&&(d.current=!1,r(!(n&&l),c.nativeEvent,"click"))}}),[o,s,a,f,g,r,n,b,l]);return u.useMemo(()=>i?{reference:E}:{},[i,E])}const fn={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},dn={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},$e=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function Cn(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:o,dataRef:s}=t,{enabled:i=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:f="pointerdown",referencePress:g=!1,referencePressEvent:b="pointerdown",ancestorScroll:p=!1,bubbles:d,capture:E}=e,c=we(),y=Y(typeof l=="function"?l:()=>!1),T=typeof l=="function"?y:l,w=u.useRef(!1),{escapeKey:C,outsidePress:M}=$e(d),{escapeKey:P,outsidePress:D}=$e(E),N=u.useRef(!1),U=u.useRef(-1),_=Y(h=>{var I;if(!n||!i||!a||h.key!=="Escape"||N.current)return;const R=(I=s.current.floatingContext)==null?void 0:I.nodeId,v=c?oe(c.nodesRef.current,R):[];if(!C&&(h.stopPropagation(),v.length>0)){let m=!0;if(v.forEach(S=>{var k;if((k=S.context)!=null&&k.open&&!S.context.dataRef.current.__escapeKeyBubbles){m=!1;return}}),!m)return}r(!1,jt(h)?h.nativeEvent:h,"escape-key")}),$=Y(h=>{var I;const R=()=>{var v;_(h),(v=X(h))==null||v.removeEventListener("keydown",R)};(I=X(h))==null||I.addEventListener("keydown",R)}),B=Y(h=>{var I;const R=s.current.insideReactTree;s.current.insideReactTree=!1;const v=w.current;if(w.current=!1,f==="click"&&v||R||typeof T=="function"&&!T(h))return;const m=X(h),S="["+ne("inert")+"]",k=H(o.floating).querySelectorAll(S);let x=F(m)?m:null;for(;x&&!le(x);){const K=vt(x);if(le(K)||!F(K))break;x=K}if(k.length&&F(m)&&!$t(m)&&!G(m,o.floating)&&Array.from(k).every(K=>!G(x,K)))return;if(te(m)&&O){const K=le(m),q=mt(m),J=/auto|scroll/,Qe=K||J.test(q.overflowX),et=K||J.test(q.overflowY),tt=Qe&&m.clientWidth>0&&m.scrollWidth>m.clientWidth,nt=et&&m.clientHeight>0&&m.scrollHeight>m.clientHeight,rt=q.direction==="rtl",ot=nt&&(rt?h.offsetX<=m.offsetWidth-m.clientWidth:h.offsetX>m.clientWidth),it=tt&&h.offsetY>m.clientHeight;if(ot||it)return}const L=(I=s.current.floatingContext)==null?void 0:I.nodeId,xe=c&&oe(c.nodesRef.current,L).some(K=>{var q;return fe(h,(q=K.context)==null?void 0:q.elements.floating)});if(fe(h,o.floating)||fe(h,o.domReference)||xe)return;const Z=c?oe(c.nodesRef.current,L):[];if(Z.length>0){let K=!0;if(Z.forEach(q=>{var J;if((J=q.context)!=null&&J.open&&!q.context.dataRef.current.__outsidePressBubbles){K=!1;return}}),!K)return}r(!1,h,"outside-press")}),W=Y(h=>{var I;const R=()=>{var v;B(h),(v=X(h))==null||v.removeEventListener(f,R)};(I=X(h))==null||I.addEventListener(f,R)});u.useEffect(()=>{if(!n||!i)return;s.current.__escapeKeyBubbles=C,s.current.__outsidePressBubbles=M;let h=-1;function I(k){r(!1,k,"ancestor-scroll")}function R(){window.clearTimeout(h),N.current=!0}function v(){h=window.setTimeout(()=>{N.current=!1},dt()?5:0)}const m=H(o.floating);a&&(m.addEventListener("keydown",P?$:_,P),m.addEventListener("compositionstart",R),m.addEventListener("compositionend",v)),T&&m.addEventListener(f,D?W:B,D);let S=[];return p&&(F(o.domReference)&&(S=ce(o.domReference)),F(o.floating)&&(S=S.concat(ce(o.floating))),!F(o.reference)&&o.reference&&o.reference.contextElement&&(S=S.concat(ce(o.reference.contextElement)))),S=S.filter(k=>{var x;return k!==((x=m.defaultView)==null?void 0:x.visualViewport)}),S.forEach(k=>{k.addEventListener("scroll",I,{passive:!0})}),()=>{a&&(m.removeEventListener("keydown",P?$:_,P),m.removeEventListener("compositionstart",R),m.removeEventListener("compositionend",v)),T&&m.removeEventListener(f,D?W:B,D),S.forEach(k=>{k.removeEventListener("scroll",I)}),window.clearTimeout(h)}},[s,o,a,T,f,n,r,p,i,C,M,_,P,$,B,D,W]),u.useEffect(()=>{s.current.insideReactTree=!1},[s,T,f]);const A=u.useMemo(()=>({onKeyDown:_,...g&&{[fn[b]]:h=>{r(!1,h.nativeEvent,"reference-press")},...b!=="click"&&{onClick(h){r(!1,h.nativeEvent,"reference-press")}}}}),[_,r,g,b]),O=u.useMemo(()=>({onKeyDown:_,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[dn[f]]:()=>{s.current.insideReactTree=!0},onBlurCapture(){c||(j(U),s.current.insideReactTree=!0,U.current=window.setTimeout(()=>{s.current.insideReactTree=!1}))}}),[_,f,s,c]);return u.useMemo(()=>i?{reference:A,floating:O}:{},[i,A,O])}function vn(t){const{open:e=!1,onOpenChange:n,elements:r}=t,o=Ee(),s=u.useRef({}),[i]=u.useState(()=>on()),a=ye()!=null,[l,f]=u.useState(r.reference),g=Y((d,E,c)=>{s.current.openEvent=d?E:void 0,i.emit("openchange",{open:d,event:E,reason:c,nested:a}),n==null||n(d,E,c)}),b=u.useMemo(()=>({setPositionReference:f}),[]),p=u.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return u.useMemo(()=>({dataRef:s,open:e,onOpenChange:g,elements:p,events:i,floatingId:o,refs:b}),[e,g,p,i,o,b])}function Sn(t){t===void 0&&(t={});const{nodeId:e}=t,n=vn({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,o=r.elements,[s,i]=u.useState(null),[a,l]=u.useState(null),g=(o==null?void 0:o.domReference)||s,b=u.useRef(null),p=we();V(()=>{g&&(b.current=g)},[g]);const d=zt({...t,elements:{...o,...a&&{reference:a}}}),E=u.useCallback(C=>{const M=F(C)?{getBoundingClientRect:()=>C.getBoundingClientRect(),getClientRects:()=>C.getClientRects(),contextElement:C}:C;l(M),d.refs.setReference(M)},[d.refs]),c=u.useCallback(C=>{(F(C)||C===null)&&(b.current=C,i(C)),(F(d.refs.reference.current)||d.refs.reference.current===null||C!==null&&!F(C))&&d.refs.setReference(C)},[d.refs]),y=u.useMemo(()=>({...d.refs,setReference:c,setPositionReference:E,domReference:b}),[d.refs,c,E]),T=u.useMemo(()=>({...d.elements,domReference:g}),[d.elements,g]),w=u.useMemo(()=>({...d,...r,refs:y,elements:T,nodeId:e}),[d,y,T,e,r]);return V(()=>{r.dataRef.current.floatingContext=w;const C=p==null?void 0:p.nodesRef.current.find(M=>M.id===e);C&&(C.context=w)}),u.useMemo(()=>({...d,context:w,refs:y,elements:T}),[d,y,T,w])}function pe(){return Ft()&&Ve()}function Tn(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:o,dataRef:s,elements:i}=t,{enabled:a=!0,visibleOnly:l=!0}=e,f=u.useRef(!1),g=u.useRef(-1),b=u.useRef(!0);u.useEffect(()=>{if(!a)return;const d=ft(i.domReference);function E(){!n&&te(i.domReference)&&i.domReference===he(H(i.domReference))&&(f.current=!0)}function c(){b.current=!0}function y(){b.current=!1}return d.addEventListener("blur",E),pe()&&(d.addEventListener("keydown",c,!0),d.addEventListener("pointerdown",y,!0)),()=>{d.removeEventListener("blur",E),pe()&&(d.removeEventListener("keydown",c,!0),d.removeEventListener("pointerdown",y,!0))}},[i.domReference,n,a]),u.useEffect(()=>{if(!a)return;function d(E){let{reason:c}=E;(c==="reference-press"||c==="escape-key")&&(f.current=!0)}return o.on("openchange",d),()=>{o.off("openchange",d)}},[o,a]),u.useEffect(()=>()=>{j(g)},[]);const p=u.useMemo(()=>({onMouseLeave(){f.current=!1},onFocus(d){if(f.current)return;const E=X(d.nativeEvent);if(l&&F(E)){if(pe()&&!d.relatedTarget){if(!b.current&&!qe(E))return}else if(!Bt(E))return}r(!0,d.nativeEvent,"focus")},onBlur(d){f.current=!1;const E=d.relatedTarget,c=d.nativeEvent,y=F(E)&&E.hasAttribute(ne("focus-guard"))&&E.getAttribute("data-type")==="outside";g.current=window.setTimeout(()=>{var T;const w=he(i.domReference?i.domReference.ownerDocument:document);!E&&w===i.domReference||G((T=s.current.floatingContext)==null?void 0:T.refs.floating.current,w)||G(i.domReference,w)||y||r(!1,c,"focus")})}}),[s,i.domReference,r,l]);return u.useMemo(()=>a?{reference:p}:{},[a,p])}function be(t,e,n){const r=new Map,o=n==="item";let s=t;if(o&&t){const{[Pe]:i,[ke]:a,...l}=t;s=l}return{...n==="floating"&&{tabIndex:-1,[Qt]:""},...s,...e.map(i=>{const a=i?i[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((i,a)=>(a&&Object.entries(a).forEach(l=>{let[f,g]=l;if(!(o&&[Pe,ke].includes(f)))if(f.indexOf("on")===0){if(r.has(f)||r.set(f,[]),typeof g=="function"){var b;(b=r.get(f))==null||b.push(g),i[f]=function(){for(var p,d=arguments.length,E=new Array(d),c=0;c<d;c++)E[c]=arguments[c];return(p=r.get(f))==null?void 0:p.map(y=>y(...E)).find(y=>y!==void 0)}}}else i[f]=g}),i),{})}}function Mn(t){t===void 0&&(t=[]);const e=t.map(a=>a==null?void 0:a.reference),n=t.map(a=>a==null?void 0:a.floating),r=t.map(a=>a==null?void 0:a.item),o=u.useCallback(a=>be(a,t,"reference"),e),s=u.useCallback(a=>be(a,t,"floating"),n),i=u.useCallback(a=>be(a,t,"item"),r);return u.useMemo(()=>({getReferenceProps:o,getFloatingProps:s,getItemProps:i}),[o,s,i])}const mn=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function In(t,e){var n,r;e===void 0&&(e={});const{open:o,elements:s,floatingId:i}=t,{enabled:a=!0,role:l="dialog"}=e,f=Ee(),g=((n=s.domReference)==null?void 0:n.id)||f,b=u.useMemo(()=>{var w;return((w=Kt(s.floating))==null?void 0:w.id)||i},[s.floating,i]),p=(r=mn.get(l))!=null?r:l,E=ye()!=null,c=u.useMemo(()=>p==="tooltip"||l==="label"?{["aria-"+(l==="label"?"labelledby":"describedby")]:o?b:void 0}:{"aria-expanded":o?"true":"false","aria-haspopup":p==="alertdialog"?"dialog":p,"aria-controls":o?b:void 0,...p==="listbox"&&{role:"combobox"},...p==="menu"&&{id:g},...p==="menu"&&E&&{role:"menuitem"},...l==="select"&&{"aria-autocomplete":"none"},...l==="combobox"&&{"aria-autocomplete":"list"}},[p,b,E,o,g,l]),y=u.useMemo(()=>{const w={id:b,...p&&{role:p}};return p==="tooltip"||l==="label"?w:{...w,...p==="menu"&&{"aria-labelledby":g}}},[p,b,g,l]),T=u.useCallback(w=>{let{active:C,selected:M}=w;const P={role:"option",...C&&{id:b+"-fui-option"}};switch(l){case"select":return{...P,"aria-selected":C&&M};case"combobox":return{...P,"aria-selected":M}}return{}},[b,l]);return u.useMemo(()=>a?{reference:c,floating:y,item:T}:{},[a,c,y,T])}export{wn as F,Sn as a,yn as b,Tn as c,Cn as d,In as e,En as f,Mn as g,xn as h,Ee as i,Rn as o,hn as s,bn as u};
