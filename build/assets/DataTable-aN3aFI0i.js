import{j as e,r as i,a4 as L,c as O}from"./index-DrziBPhZ.js";import{T as C}from"./index-BPwFYay9.js";import{S as A,P as V,C as W}from"./Skeleton-C2woZuKJ.js";import{S as q}from"./Select-nm3Sb7o5.js";import{u as G,g as J,b as K,d as Q,a as U,f as M}from"./index-GlPtBqgB.js";const{Tr:X,Td:Y,TBody:Z}=C,ee=m=>{const{columns:c=1,rows:x=10,avatarInColumns:l=[],avatarProps:r}=m;return e.jsx(Z,{children:Array.from(new Array(x),(a,n)=>n+0).map(a=>e.jsx(X,{children:Array.from(new Array(c),(n,d)=>d+0).map(n=>e.jsx(Y,{children:e.jsxs("div",{className:"flex flex-auto items-center gap-2",children:[l.includes(n)&&e.jsx("div",{children:e.jsx(A,{variant:"circle",...r})}),e.jsx(A,{})]})},`col-${n}`))},`row-${a}`))})},{Tr:b,Th:te,Td:P,THead:se,TBody:ae,Sorter:de}=C,I=m=>{const{indeterminate:c,onChange:x,onCheckBoxChange:l,onIndeterminateCheckBoxChange:r,...a}=m,n=i.useRef(null);i.useEffect(()=>{typeof c=="boolean"&&n.current&&(n.current.indeterminate=!a.checked&&c)},[n,c]);const d=o=>{x(o),l==null||l(o),r==null||r(o)};return e.jsx(W,{ref:n,className:"mb-0",onChange:(o,u)=>d(u),...a})};function ne(m,c){const{skeletonAvatarColumns:x,columns:l=[],data:r=[],loading:a=!1,onCheckBoxChange:n,onIndeterminateCheckBoxChange:d,onPaginationChange:o,onSelectChange:u,onSort:j,pageSizes:T=[10,25,50,100],selectable:k=!1,skeletonAvatarProps:D,pagingData:w={total:0,pageIndex:1,pageSize:10},totalAmount:f}=m,{pageSize:h,pageIndex:S,total:R}=w,[g,z]=i.useState(null),N=i.useMemo(()=>T.map(t=>({value:t,label:`${t} / page`})),[T]),H=(t,s)=>{a||n==null||n(t,s)},$=(t,s)=>{a||d==null||d(t,s)},E=t=>{a||o==null||o(t)},F=t=>{a||u==null||u(Number(t))};i.useEffect(()=>{if(Array.isArray(g)){const t=g.length>0?g[0].desc?"desc":"asc":"",s=g.length>0?g[0].id:"";j==null||j({order:t,key:s})}},[g]);const y=i.useMemo(()=>{const t=l;return k?[{id:"select",header:({table:s})=>e.jsx(I,{checked:s.getIsAllRowsSelected(),indeterminate:s.getIsSomeRowsSelected(),onChange:s.getToggleAllRowsSelectedHandler(),onIndeterminateCheckBoxChange:v=>{$(v.target.checked,s.getRowModel().rows)}}),cell:({row:s})=>e.jsx(I,{checked:s.getIsSelected(),disabled:!s.getCanSelect(),indeterminate:s.getIsSomeSelected(),onChange:s.getToggleSelectedHandler(),onCheckBoxChange:v=>H(v.target.checked,s.original)})},...t]:t},[l,k]),p=G({data:r,columns:y,getCoreRowModel:U(),getFilteredRowModel:Q(),getPaginationRowModel:K(),getSortedRowModel:J(),manualPagination:!0,manualSorting:!0,onSortingChange:t=>{z(t)},state:{sorting:g}}),_=()=>{p.resetSorting()},B=()=>{p.toggleAllRowsSelected(!1)};return i.useImperativeHandle(c,()=>({resetSorting:_,resetSelected:B})),e.jsxs(L,{loading:a&&r.length!==0,type:"cover",children:[e.jsxs(C,{children:[e.jsx(se,{children:p.getHeaderGroups().map(t=>e.jsx(b,{children:t.headers.map(s=>e.jsx(te,{colSpan:s.colSpan,children:s.isPlaceholder?null:e.jsx("div",{className:O(s.column.getCanSort()&&"cursor-pointer select-none point",a&&"pointer-events-none"),onClick:s.column.getToggleSortingHandler(),children:M(s.column.columnDef.header,s.getContext())})},s.id))},t.id))}),a&&r.length===0?e.jsx(ee,{columns:y.length,rows:w.pageSize,avatarInColumns:x,avatarProps:D}):e.jsx(ae,{children:r.length===0?e.jsx(b,{children:e.jsx(P,{colSpan:y.length,className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-500 dark:text-gray-400",children:"No data found"}),!a&&e.jsx("span",{className:"text-sm text-gray-400 dark:text-gray-500",children:"There are no records to display"})]})})}):p.getRowModel().rows.slice(0,h).map(t=>e.jsx(b,{children:t.getVisibleCells().map(s=>e.jsx(P,{children:M(s.column.columnDef.cell,s.getContext())},s.id))},t.id))})]}),r.length>0&&e.jsxs("div",{className:"space-y-2 mt-4",children:[f!==void 0&&e.jsx("div",{className:"flex justify-end mb-2",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 px-3 py-2 rounded-md border border-gray-200 dark:border-gray-600 inline-flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200 mr-2",children:"Total Amount:"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:typeof f=="number"?f.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):f||"N/A"})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(V,{pageSize:h,currentPage:S,total:R,onChange:E}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 hidden sm:block",children:["Showing ",(S-1)*h+1," to"," ",Math.min(S*h,R)," entries"]}),e.jsx("div",{style:{minWidth:130},children:e.jsx(q,{size:"sm",menuPlacement:"top",isSearchable:!1,value:N.filter(t=>t.value===h),options:N,onChange:t=>F(t==null?void 0:t.value)})})]})]})]})]})}const ge=i.forwardRef(ne);export{ge as D};
